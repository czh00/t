<!DOCTYPE html>
<html lang="zh-Hant">
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<title>æ™‚é–“</title>
	<style>
		:root { --page-background-color: #000; } /* å®šç¾©é é¢èƒŒæ™¯è‰²çš„CSSè®Šæ•¸ï¼Œé è¨­ç‚ºé»‘è‰² */
		*, *::before, *::after { box-sizing: border-box; } /* æ‰€æœ‰å…ƒç´ çš„ç›’æ¨¡å‹éƒ½ä½¿ç”¨é‚Šæ¡†ç›’æ¨¡å‹ */
		body {
			margin: 0; /* ç§»é™¤bodyé è¨­å¤–é‚Šè· */
			overflow: hidden; /* éš±è—è¶…å‡ºè¦–å£çš„éƒ¨åˆ†ï¼Œé˜²æ­¢æ»¾å‹•æ¢å‡ºç¾ */
			display: flex; /* ä½¿ç”¨Flexboxä½ˆå±€ */
			flex-direction: column; /* å‚ç›´æ’åˆ—å­å…ƒç´  */
			justify-content: center; /* æ°´å¹³å±…ä¸­å°é½Šå­å…ƒç´  */
			align-items: center; /* å‚ç›´å±…ä¸­å°é½Šå­å…ƒç´  */
			min-height: 100vh; /* æœ€å°é«˜åº¦ç‚ºè¦–å£é«˜åº¦çš„100% */
			width: 100vw; /* å¯¬åº¦ç‚ºè¦–å£å¯¬åº¦çš„100% */
			position: relative; /* ç›¸å°å®šä½ï¼Œç”¨æ–¼å­å…ƒç´ çš„çµ•å°å®šä½ */
			font-family: 'Inter', sans-serif; /* è¨­å®šå­—é«”ç‚ºInteræˆ–ç„¡è¥¯ç·šå­—é«” */
			background-color: var(--page-background-color); /* ä½¿ç”¨CSSè®Šæ•¸è¨­å®šèƒŒæ™¯è‰² */
		}
		#dateTimeDisplay {
			font-family: 'Segoe UI', Arial, sans-serif; /* è¨­å®šæ—¥æœŸæ™‚é–“é¡¯ç¤ºçš„å­—é«” */
			font-weight: bold; /* å­—é«”åŠ ç²— */
			text-align: center; /* æ–‡å­—å±…ä¸­å°é½Š */
			padding: 10px; /* å…§é‚Šè· */
			text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5); /* æ–‡å­—é™°å½±æ•ˆæœ */
			position: absolute; /* çµ•å°å®šä½ */
			transition: transform 1s ease-in-out; /* è½‰æ›æ•ˆæœçš„éæ¸¡å‹•ç•« */
			transform: translate(-50%, -50%); /* å°‡å…ƒç´ ä¸­å¿ƒé»ç§»åˆ°çˆ¶å…ƒç´ ä¸­å¿ƒ */
			left: 50%; /* è·é›¢å·¦é‚Š50% */
			top: 50%; /* è·é›¢é ‚éƒ¨50% */
			cursor: default; /* é¼ æ¨™æ¨£å¼ç‚ºé è¨­ */
			z-index: 10; /* Zè»¸å±¤ç´šï¼Œç¢ºä¿åœ¨å…¶ä»–å…ƒç´ ä¹‹ä¸Š */
		}
		.time-text {
			font-size: 32vw; /* æ™‚é–“æ–‡å­—å¤§å°ï¼Œæ ¹æ“šè¦–å£å¯¬åº¦èª¿æ•´ */
			margin-bottom: -10vw; /* è² å¤–é‚Šè·ï¼Œä½¿è¡Œé–“è·æ›´ç·Šæ¹Š */
			position: relative; /* ç›¸å°å®šä½ */
			display: inline-block; /* è¡Œå…§å¡Šç´šå…ƒç´  */
			white-space: nowrap; /* é˜²æ­¢æ–‡å­—æ›è¡Œ */
			padding-right: 8vw; /* å³å´å…§é‚Šè· */
		}
		.time-seconds {
			font-size: 6vw; /* ç§’æ•¸æ–‡å­—å¤§å° */
			cursor: pointer; /* é¼ æ¨™æ¨£å¼ç‚ºæ‰‹å‹ */
			position: absolute; /* çµ•å°å®šä½ */
			right: 0; /* è·é›¢å³é‚Š0 */
			bottom: 6vw; /* è·é›¢åº•éƒ¨6vw */
			text-align: right; /* æ–‡å­—å³å°é½Š */
			width: 6vw; /* å¯¬åº¦ */
		}
		.time-ampm {
			font-size: 5vw; /* ä¸Šåˆ/ä¸‹åˆæ–‡å­—å¤§å° */
			position: absolute; /* çµ•å°å®šä½ */
			top: 11vw; /* è·é›¢é ‚éƒ¨11vw */
			right: 0; /* è·é›¢å³é‚Š0 */
			text-align: right; /* æ–‡å­—å³å°é½Š */
			width: 8vw; /* å¯¬åº¦ */
		}
		.gregorian-date-text {
			font-size: 10vw; /* å…¬æ›†æ—¥æœŸæ–‡å­—å¤§å° */
			margin-top: -2vw; /* è² ä¸Šå¤–é‚Šè· */
			margin-bottom: -3vw; /* è² ä¸‹å¤–é‚Šè· */
			display: block; /* å¡Šç´šå…ƒç´  */
			white-space: nowrap; /* é˜²æ­¢æ–‡å­—æ›è¡Œ */
			cursor: pointer; /* é¼ æ¨™æ¨£å¼ç‚ºæ‰‹å‹ */
			position: relative; /* ç›¸å°å®šä½ */
			z-index: 1; /* Zè»¸å±¤ç´š */
		}
		.lunar-and-jieqi-line {
			display: flex; /* ä½¿ç”¨Flexboxä½ˆå±€ */
			justify-content: center; /* æ°´å¹³å±…ä¸­å°é½Šå­å…ƒç´  */
			align-items: center; /* å‚ç›´å±…ä¸­å°é½Šå­å…ƒç´  */
			font-size: 6.4vw; /* è¾²æ›†å’Œç¯€æ°£è¡Œæ–‡å­—å¤§å° */
			white-space: nowrap; /* é˜²æ­¢æ–‡å­—æ›è¡Œ */
			width: 92vw; /* å¯¬åº¦ */
			margin: 0 auto; /* æ°´å¹³å±…ä¸­ */
			overflow: hidden; /* éš±è—è¶…å‡ºå®¹å™¨çš„éƒ¨åˆ† */
			position: relative; /* ç›¸å°å®šä½ */
			z-index: 1; /* Zè»¸å±¤ç´š */
		}
		.lunar-date-static-text { flex-shrink: 0; text-align: right; cursor: pointer; } /* ä¸ç¸®å° | æ–‡å­—å³å°é½Š | é¼ æ¨™æ¨£å¼ç‚ºæ‰‹å‹ */
		.jieqi-holiday-marquee-container {
			flex-grow: 1; /* ä½”æ»¿å‰©é¤˜ç©ºé–“ */
			overflow: hidden; /* éš±è—è¶…å‡ºå®¹å™¨çš„éƒ¨åˆ† */
			position: relative; /* ç›¸å°å®šä½ */
			text-align: left; /* æ–‡å­—å·¦å°é½Š */
			min-width: 0; /* æœ€å°å¯¬åº¦ç‚º0 */
			cursor: pointer; /* é¼ æ¨™æ¨£å¼ç‚ºæ‰‹å‹ */
		}
		.jieqi-holiday-marquee-inner {
			display: flex; /* ä½¿ç”¨Flexboxä½ˆå±€ */
			flex-wrap: nowrap; /* ä¸æ›è¡Œ */
			width: fit-content; /* å¯¬åº¦é©æ‡‰å…§å®¹ */
			will-change: transform; /* æç¤ºç€è¦½å™¨transformå±¬æ€§å°‡æœƒæ”¹è®Šï¼Œå„ªåŒ–å‹•ç•«æ€§èƒ½ */
		}
		.jieqi-holiday-marquee-content, .jieqi-holiday-marquee-content-duplicate { display: inline-block; white-space: nowrap; flex-shrink: 0; } /* è¡Œå…§å¡Šç´šå…ƒç´  | é˜²æ­¢æ–‡å­—æ›è¡Œ | ä¸ç¸®å° */
		.jieqi-holiday-marquee-container.scrolling .jieqi-holiday-marquee-inner { animation-name: marquee; animation-timing-function: linear; animation-iteration-count: infinite; } /* æ‡‰ç”¨marqueeå‹•ç•« | ç·šæ€§å‹•ç•« | ç„¡é™æ¬¡é‡è¤‡å‹•ç•« */
		@keyframes marquee { from { transform: translateX(0); } to { transform: translateX(-50%); } } /* å¾åŸå§‹ä½ç½®é–‹å§‹ | ç§»å‹•åˆ°å·¦å´50%çš„ä½ç½® */
		.noscript-message { font-size: 0.5em; color: #FFB3BA; margin-top: 10px; } /* å­—é«”å¤§å° | æ–‡å­—é¡è‰² | ä¸Šå¤–é‚Šè· */
		.modal {
			display: none; /* é è¨­éš±è— */
			position: fixed; /* å›ºå®šå®šä½ */
			z-index: 100; /* Zè»¸å±¤ç´šï¼Œç¢ºä¿åœ¨æ‰€æœ‰å…ƒç´ ä¹‹ä¸Š */
			left: 0; top: 0; width: 100%; height: 100%; /* ä½”æ»¿æ•´å€‹è¦–å£ */
			overflow: auto; /* å…§å®¹æº¢å‡ºæ™‚é¡¯ç¤ºæ»¾å‹•æ¢ */
			background-color: rgba(0, 0, 0, 0.7); /* åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
		}
		.modal.is-active { display: flex; justify-content: center; align-items: center; } /* é¡¯ç¤ºç‚ºFlexboxä½ˆå±€ | æ°´å¹³å±…ä¸­å°é½Šå­å…ƒç´  | å‚ç›´å±…ä¸­å°é½Šå­å…ƒç´  */
		.modal-content {
			background-color: #333; /* èƒŒæ™¯è‰² */
			margin: auto; /* è‡ªå‹•å¤–é‚Šè·ï¼Œå¯¦ç¾æ°´å¹³å‚ç›´å±…ä¸­ */
			padding: 10px; /* å…§é‚Šè· */
			border: 1px solid #888; /* é‚Šæ¡† */
			width: 90%; /* å¯¬åº¦ */
			max-width: 600px; /* æœ€å¤§å¯¬åº¦ */
			border-radius: 10px; /* åœ“è§’é‚Šæ¡† */
			box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); /* é™°å½±æ•ˆæœ */
			color: #00FF00; /* æ–‡å­—é¡è‰² */
			text-align: center; /* æ–‡å­—å±…ä¸­å°é½Š */
			display: flex; /* ä½¿ç”¨Flexboxä½ˆå±€ */
			flex-direction: column; /* å‚ç›´æ’åˆ—å­å…ƒç´  */
			gap: 15px; /* å­å…ƒç´ ä¹‹é–“çš„é–“è· */
			max-height: 90vh; /* æœ€å¤§é«˜åº¦ç‚ºè¦–å£é«˜åº¦çš„90% */
			overflow-y: auto; /* å‚ç›´æ–¹å‘å…§å®¹æº¢å‡ºæ™‚é¡¯ç¤ºæ»¾å‹•æ¢ */
		}
		.setting-item { margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; flex-wrap: nowrap; } /* ä¸‹å¤–é‚Šè· | ä½¿ç”¨Flexboxä½ˆå±€ | å­å…ƒç´ å…©ç«¯å°é½Š | å‚ç›´å±…ä¸­å°é½Šå­å…ƒç´  | ä¸æ›è¡Œ */
		.setting-item label { font-size: 1.2em; flex-shrink: 0; margin-right: 10px; } /* å­—é«”å¤§å° | ä¸ç¸®å° | å³å¤–é‚Šè· */
		.switch { position: relative; display: inline-block; width: 60px; height: 34px; margin-left: auto; margin-right: 10px; flex-shrink: 0; } /* ç›¸å°å®šä½ | è¡Œå…§å¡Šç´šå…ƒç´  | å¯¬åº¦ | é«˜åº¦ | å·¦å¤–é‚Šè·è‡ªå‹• | å³å¤–é‚Šè· | ä¸ç¸®å° */
		.switch input { opacity: 0; width: 0; height: 0; } /* éš±è—è¼¸å…¥æ¡† | å¯¬åº¦ç‚º0 | é«˜åº¦ç‚º0 */
		.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; } /* çµ•å°å®šä½ | é¼ æ¨™æ¨£å¼ç‚ºæ‰‹å‹ | ä½ç½® | èƒŒæ™¯è‰² | éæ¸¡å‹•ç•« | åœ“è§’é‚Šæ¡† */
		.slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; } /* çµ•å°å®šä½ | å…§å®¹ç‚ºç©º | å°ºå¯¸ | ä½ç½® | èƒŒæ™¯è‰² | éæ¸¡å‹•ç•« | åœ“å½¢ */
		input:checked + .slider { background-color: #00FF00; } /* é¸ä¸­æ™‚æ»‘å¡ŠèƒŒæ™¯è‰² */
		input:focus + .slider { box-shadow: 0 0 1px #00FF00; } /* èšç„¦æ™‚æ»‘å¡Šé™°å½± */
		input:checked + .slider:before { transform: translateX(26px); } /* æ»‘å¡Šç§»å‹• */
		.setting-item input[type="color"] { width: 40px; height: 34px; border: none; padding: 0; background: none; cursor: pointer; flex-shrink: 0; } /* å°ºå¯¸ | ç„¡é‚Šæ¡† | ç„¡å…§é‚Šè· | ç„¡èƒŒæ™¯ | é¼ æ¨™æ¨£å¼ç‚ºæ‰‹å‹ | ä¸ç¸®å° */
		.action-button { background-color: #555; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 1.1em; margin-top: 0px; } /* èƒŒæ™¯è‰² | æ–‡å­—é¡è‰² | å…§é‚Šè· | ç„¡é‚Šæ¡† | åœ“è§’é‚Šæ¡† | é¼ æ¨™æ¨£å¼ç‚ºæ‰‹å‹ | å­—é«”å¤§å° | ä¸Šå¤–é‚Šè· */
		.action-button:hover { background-color: #777; } /* é¼ æ¨™æ‡¸åœæ™‚èƒŒæ™¯è‰² */
		.button-group { display: flex; justify-content: center; gap: 10px; margin-top: 0px; white-space: nowrap; } /* ä½¿ç”¨Flexboxä½ˆå±€ | æ°´å¹³å±…ä¸­å°é½Šå­å…ƒç´  | å­å…ƒç´ ä¹‹é–“çš„é–“è· | ä¸Šå¤–é‚Šè· | é˜²æ­¢æ–‡å­—æ›è¡Œ */
		.calendar-settings-container { display: flex; flex-wrap: wrap; gap: 20px; justify-content: space-around; width: 100%; } /* ä½¿ç”¨Flexboxä½ˆå±€ | å…è¨±æ›è¡Œ | å­å…ƒç´ ä¹‹é–“çš„é–“è· | å­å…ƒç´ å…©ç«¯å°é½Š | å¯¬åº¦ä½”æ»¿çˆ¶å…ƒç´  */
		.gregorian-settings-column, .lunar-settings-column { flex: 1; min-width: 80px; padding: 10px; border: 1px solid #555; border-radius: 8px; background-color: #444; text-align: left; } /* ä½”æ»¿å‰©é¤˜ç©ºé–“ | æœ€å°å¯¬åº¦ | å…§é‚Šè· | é‚Šæ¡† | åœ“è§’é‚Šæ¡† | èƒŒæ™¯è‰² | æ–‡å­—å·¦å°é½Š */
		.gregorian-settings-column h3, .lunar-settings-column h3 { text-align: center; margin-top: 0; } /* æ–‡å­—å±…ä¸­å°é½Š | ç§»é™¤ä¸Šå¤–é‚Šè· */
		.lunar-date-clickable, .lunar-shichen-clickable { cursor: pointer; } /* é¼ æ¨™æ¨£å¼ç‚ºæ‰‹å‹ */
		.yiji-content p, .jieqi-content p { margin-bottom: 10px; font-size: 1.5em; line-height: 1.6; } /* ä¸‹å¤–é‚Šè· | å­—é«”å¤§å° | è¡Œé«˜ */
		.yiji-content strong, .jieqi-content strong { color: #FFD700; } /* æ–‡å­—é¡è‰² */
		.calendar-header { display: flex; justify-content: space-between; align-items: center; padding: 0 10px; } /* ä½¿ç”¨Flexboxä½ˆå±€ | å­å…ƒç´ å…©ç«¯å°é½Š | å‚ç›´å±…ä¸­å°é½Šå­å…ƒç´  | æ°´å¹³å…§é‚Šè· */
		.calendar-header h2 { margin: 0; font-size: 1.5em; color: #00FF00; } /* ç§»é™¤å¤–é‚Šè· | å­—é«”å¤§å° | æ–‡å­—é¡è‰² */
		.calendar-header button { background: none; border: none; color: #00FF00; font-size: 2em; cursor: pointer; } /* ç„¡èƒŒæ™¯ | ç„¡é‚Šæ¡† | æ–‡å­—é¡è‰² | å­—é«”å¤§å° | é¼ æ¨™æ¨£å¼ç‚ºæ‰‹å‹ */
		.calendar-content { background-color: #2c2c2c; margin: auto; padding: 20px; border: 1px solid #888; width: 95%; max-width: 800px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.6); color: #e0e0e0; text-align: center; display: flex; flex-direction: column; gap: 15px; max-height: 90vh; } /* èƒŒæ™¯è‰² | å±…ä¸­ | å…§é‚Šè· | é‚Šæ¡† | å°ºå¯¸ | åœ“è§’ | é™°å½± | æ–‡å­—é¡è‰² | æ–‡å­—å±…ä¸­ | Flexboxä½ˆå±€ | å‚ç›´æ’åˆ— | é–“è· | æœ€å¤§é«˜åº¦ */
		.calendar-weekdays, .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; } /* ä½¿ç”¨Gridä½ˆå±€ | 7åˆ—ç­‰å¯¬ | ç¶²æ ¼é–“è· */
		.calendar-weekdays div { font-weight: bold; color: #aaa; padding-bottom: 5px; } /* å­—é«”åŠ ç²— | æ–‡å­—é¡è‰² | åº•éƒ¨å…§é‚Šè· */
		.calendar-day { background-color: #444; border-radius: 5px; padding: 5px; min-height: 60px; display: flex; flex-direction: column; justify-content: space-between; align-items: center; font-size: 0.9em; border: 1px solid #555; } /* èƒŒæ™¯è‰² | åœ“è§’ | å…§é‚Šè· | æœ€å°é«˜åº¦ | Flexboxä½ˆå±€ | å‚ç›´æ’åˆ— | å…©ç«¯å°é½Š | å‚ç›´å±…ä¸­ | å­—é«”å¤§å° | é‚Šæ¡† */
		.calendar-day.other-month { color: #777; background-color: #3a3a3a; } /* å…¶ä»–æœˆä»½çš„æ—¥æœŸæ–‡å­—é¡è‰² | å…¶ä»–æœˆä»½çš„æ—¥æœŸèƒŒæ™¯è‰² */
		.calendar-day.is-today { border-color: #00FF00; box-shadow: 0 0 5px #00FF00; } /* ä»Šå¤©æ—¥æœŸçš„é‚Šæ¡†é¡è‰² | ä»Šå¤©æ—¥æœŸçš„é™°å½±æ•ˆæœ */
		.calendar-day .gregorian-day { font-size: 1.2em; font-weight: bold; } /* å…¬æ›†æ—¥æœŸæ–‡å­—å¤§å° | å­—é«”åŠ ç²— */
		.calendar-day .lunar-day { font-size: 0.8em; color: #ccc; } /* è¾²æ›†æ—¥æœŸæ–‡å­—å¤§å° | æ–‡å­—é¡è‰² */
		.weekly-calendar-content { background-color: #2c2c2c; margin: auto; padding: 15px; border: 1px solid #888; width: 98%; max-width: 1200px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.6); color: #e0e0e0; text-align: center; display: flex; flex-direction: column; gap: 10px; max-height: 90vh; } /* èƒŒæ™¯è‰² | å±…ä¸­ | å…§é‚Šè· | é‚Šæ¡† | å°ºå¯¸ | åœ“è§’ | é™°å½± | æ–‡å­—é¡è‰² | æ–‡å­—å±…ä¸­ | Flexboxä½ˆå±€ | å‚ç›´æ’åˆ— | é–“è· | æœ€å¤§é«˜åº¦ */
		.weekly-calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; } /* ä½¿ç”¨Gridä½ˆå±€ | 7åˆ—ç­‰å¯¬ | ç¶²æ ¼é–“è· */
		.weekly-calendar-day { background-color: #444; border-radius: 8px; padding: 10px; min-height: 100px; display: flex; flex-direction: column; align-items: center; border: 1px solid #555; } /* èƒŒæ™¯è‰² | åœ“è§’ | å…§é‚Šè· | æœ€å°é«˜åº¦ | Flexboxä½ˆå±€ | å‚ç›´æ’åˆ— | å‚ç›´å±…ä¸­ | é‚Šæ¡† */
		.weekly-calendar-day.is-today { border-color: #00FF00; box-shadow: 0 0 8px #00FF00; } /* ä»Šå¤©æ—¥æœŸçš„é‚Šæ¡†é¡è‰² | ä»Šå¤©æ—¥æœŸçš„é™°å½±æ•ˆæœ */
		.weekly-day-header { font-weight: bold; font-size: 1.1em; margin-bottom: 5px; } /* å­—é«”åŠ ç²— | å­—é«”å¤§å° | ä¸‹å¤–é‚Šè· */
		.weekly-gregorian-day { font-size: 1.5em; font-weight: bold; } /* å…¬æ›†æ—¥æœŸæ–‡å­—å¤§å° | å­—é«”åŠ ç²— */
		.weekly-lunar-day { font-size: 0.9em; color: #ccc; margin-top: 5px; } /* è¾²æ›†æ—¥æœŸæ–‡å­—å¤§å° | æ–‡å­—é¡è‰² | ä¸Šå¤–é‚Šè· */
		.yearly-calendar-content { background-color: #2c2c2c; margin: auto; padding: 15px; border: 1px solid #888; width: 98%; max-width: 1400px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.6); color: #e0e0e0; display: flex; flex-direction: column; gap: 10px; max-height: 95vh; } /* èƒŒæ™¯è‰² | å±…ä¸­ | å…§é‚Šè· | é‚Šæ¡† | å°ºå¯¸ | åœ“è§’ | é™°å½± | æ–‡å­—é¡è‰² | Flexboxä½ˆå±€ | å‚ç›´æ’åˆ— | é–“è· | æœ€å¤§é«˜åº¦ */
		.yearly-calendar-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; overflow-y: auto; padding: 10px; } /* Gridä½ˆå±€ | è‡ªå‹•èª¿æ•´åˆ—æ•¸ | é–“è· | å‚ç›´æ»¾å‹• | å…§é‚Šè· */
		.yearly-month-container { background-color: #3a3a3a; border-radius: 8px; padding: 10px; border: 1px solid #555; } /* èƒŒæ™¯è‰² | åœ“è§’ | å…§é‚Šè· | é‚Šæ¡† */
		.yearly-month-header { font-size: 1.2em; font-weight: bold; text-align: center; margin-bottom: 10px; color: #00FF00; } /* å­—é«”å¤§å° | å­—é«”åŠ ç²— | æ–‡å­—å±…ä¸­ | ä¸‹å¤–é‚Šè· | æ–‡å­—é¡è‰² */
		.yearly-weekdays, .yearly-day-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 3px; text-align: center; } /* Gridä½ˆå±€ | 7åˆ—ç­‰å¯¬ | é–“è· | æ–‡å­—å±…ä¸­ */
		.yearly-weekdays div { font-size: 0.8em; color: #aaa; } /* å­—é«”å¤§å° | æ–‡å­—é¡è‰² */
		.yearly-day { font-size: 0.9em; padding: 2px; border-radius: 3px; } /* å­—é«”å¤§å° | å…§é‚Šè· | åœ“è§’ */
		.yearly-day.is-today { background-color: #00FF00; color: #000; font-weight: bold; } /* ä»Šå¤©æ—¥æœŸçš„èƒŒæ™¯è‰² | æ–‡å­—é¡è‰² | å­—é«”åŠ ç²— */
		#background-scanline-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; background-color: transparent; display: none; } /* å›ºå®šå®šä½ | ä½ç½® | å°ºå¯¸ | ç¦ç”¨é¼ æ¨™äº‹ä»¶ | Zè»¸å±¤ç´š | é€æ˜èƒŒæ™¯ | é è¨­éš±è— */
		#background-scanline-overlay.active.pattern-a { display: block; background-image: repeating-linear-gradient(to bottom, transparent, transparent 2px, rgba(0,0,0,0.3) 2px, rgba(0,0,0,0.3) 4px); } /* é¡¯ç¤º | èƒŒæ™¯åœ– */
		#background-scanline-overlay.active.pattern-b { display: block; background-image: repeating-linear-gradient(to bottom, rgba(0,0,0,0.3) 0, rgba(0,0,0,0.3) 2px, transparent 2px, transparent 4px); } /* é¡¯ç¤º | èƒŒæ™¯åœ– */
		#text-scanline-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 50; background-color: transparent; display: none; } /* å›ºå®šå®šä½ | ä½ç½® | å°ºå¯¸ | ç¦ç”¨é¼ æ¨™äº‹ä»¶ | Zè»¸å±¤ç´š | é€æ˜èƒŒæ™¯ | é è¨­éš±è— */
		#text-scanline-overlay.active.pattern-a { display: block; background-image: repeating-linear-gradient(to bottom, transparent, transparent 2px, var(--page-background-color) 2px, var(--page-background-color) 4px); } /* é¡¯ç¤º | èƒŒæ™¯åœ– */
		#text-scanline-overlay.active.pattern-b { display: block; background-image: repeating-linear-gradient(to bottom, var(--page-background-color) 0, var(--page-background-color) 2px, transparent 2px, transparent 4px); } /* é¡¯ç¤º | èƒŒæ™¯åœ– */
		#fullscreen-icon { position: fixed; top: 20px; right: 20px; width: 32px; height: 32px; cursor: pointer; z-index: 200; opacity: 0.5; transition: opacity 0.3s ease; } /* å›ºå®šå®šä½ | ä½ç½® | å°ºå¯¸ | é¼ æ¨™æ¨£å¼ | Zè»¸å±¤ç´š | é€æ˜åº¦ | éæ¸¡å‹•ç•« */
		#fullscreen-icon svg { width: 100%; height: 100%; fill: #fff; } /* å°ºå¯¸ | SVGå¡«å……é¡è‰² */
		#fullscreen-icon:hover { opacity: 1; } /* é¼ æ¨™æ‡¸åœæ™‚å®Œå…¨ä¸é€æ˜ */
	</style>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/lunar-javascript/1.7.0/lunar.min.js"></script>
</head>
<body>
    <div id="content-wrapper">
        <div id="background-scanline-overlay"></div>
        <div id="text-scanline-overlay"></div>
        <div id="dateTimeDisplay">
            <div class="time-text" id="timeTextContainer">
                <span id="hoursMinutesDisplay"></span> <span class="time-seconds" id="secondsDisplay"></span> <span class="time-ampm" id="amPmDisplay"></span>
            </div>
            <div class="gregorian-date-text" id="gregorianDateDisplay"></div>
            <div class="lunar-and-jieqi-line" id="lunarAndJieqiLine">
                <span class="lunar-date-static-text" id="lunarDateDisplay"></span>
                <div class="jieqi-holiday-marquee-container" id="jieqiHolidayMarqueeContainer">
                    <div class="jieqi-holiday-marquee-inner" id="jieqiHolidayMarqueeInner">
                        <span class="jieqi-holiday-marquee-content"></span> <span class="jieqi-holiday-marquee-content-duplicate"></span>
                    </div>
                </div>
            </div>
        </div>
        <noscript><div class="noscript-message">æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´æˆ–å·²ç¦ç”¨ JavaScriptã€‚</div></noscript>
        <div class="modal" id="settingsModal"> <!-- è¨­å®š Modal -->
            <div class="modal-content">
                <h2>é¡¯ç¤ºè¨­å®š</h2>
                <div class="calendar-settings-container">
                    <div class="gregorian-settings-column">
                        <h3>å…¬æ›†</h3>
                        <div class="setting-item"><label for="textColor">æ™‚é–“</label> <label class="switch" title="åˆ‡æ›ä¸Šåˆ/ä¸‹åˆæ ¼å¼"><input id="showAmPm" type="checkbox"> <span class="slider"></span></label> <input id="textColor" type="color" value="#00FF00"></div>
                        <div class="setting-item"><label for="showGregorianYear">å¹´</label> <label class="switch"><input id="showGregorianYear" type="checkbox"> <span class="slider"></span></label> <input id="gregorianYearColor" type="color" value="#00FF00"></div>
                        <div class="setting-item"><label for="showGregorianMonth">æœˆ</label> <label class="switch"><input id="showGregorianMonth" type="checkbox"> <span class="slider"></span></label> <input id="gregorianMonthColor" type="color" value="#00FF00"></div>
                        <div class="setting-item"><label for="showGregorianDay">æ—¥</label> <label class="switch"><input id="showGregorianDay" type="checkbox"> <span class="slider"></span></label> <input id="gregorianDayColor" type="color" value="#00FF00"></div>
                        <div class="setting-item"><label for="showGregorianWeekday">å‘¨</label> <label class="switch"><input id="showGregorianWeekday" type="checkbox"> <span class="slider"></span></label> <input id="gregorianWeekdayColor" type="color" value="#00FF00"></div>
                    </div>
                    <div class="lunar-settings-column">
                        <h3>è¾²æ›†</h3>
                        <div class="setting-item"><label for="showMinguoYear">å¹´</label> <label class="switch"><input id="showMinguoYear" type="checkbox"> <span class="slider"></span></label> <input id="minguoYearColor" type="color" value="#00FF00"></div>
                        <div class="setting-item"><label for="showLunarMonth">æœˆ</label> <label class="switch"><input id="showLunarMonth" type="checkbox"> <span class="slider"></span></label> <input id="lunarMonthColor" type="color" value="#00FF00"></div>
                        <div class="setting-item"><label for="showLunarDay">æ—¥</label> <label class="switch"><input id="showLunarDay" type="checkbox"> <span class="slider"></span></label> <input id="lunarDayColor" type="color" value="#00FF00"></div>
                        <div class="setting-item"><label for="showLunarShiChen">æ™‚</label> <label class="switch"><input id="showLunarShiChen" type="checkbox"> <span class="slider"></span></label> <input id="lunarShiChenColor" type="color" value="#00FF00"></div>
                        <div class="setting-item"><label for="showJieqi">ç¯€æ°£</label> <label class="switch"><input id="showJieqi" type="checkbox"> <span class="slider"></span></label> <input id="jieqiColor" type="color" value="#00FF00"></div>
                        <div class="setting-item"><label for="showHolidays">ç¯€æ—¥</label> <label class="switch"><input id="showHolidays" type="checkbox"> <span class="slider"></span></label> <input id="holidayColor" type="color" value="#0000FF"></div>
                    </div>
                </div>
                <div class="setting-item"><label for="backgroundColor">èƒŒæ™¯ç‰¹æ•ˆèˆ‡é¡è‰²</label> <label class="switch" title="åˆ‡æ›èƒŒæ™¯æƒæç·šç‰¹æ•ˆ"><input id="enableBackgroundScanline" type="checkbox"> <span class="slider"></span></label> <input id="backgroundColor" type="color" value="#000000"></div>
                <div class="setting-item"><label for="enableTextScanline">æ–‡å­—æƒæç·šç‰¹æ•ˆ</label> <label class="switch"><input id="enableTextScanline" type="checkbox"> <span class="slider"></span></label></div>
                <div class="setting-item"><label for="enableMovement">éš¨æ©Ÿç§»å‹•ç‰¹æ•ˆ</label> <label class="switch"><input id="enableMovement" type="checkbox"> <span class="slider"></span></label></div>
                <div class="button-group"><button class="action-button" id="restoreDefaultsBtn">æ¢å¾©é è¨­</button> <button class="action-button" id="randomColorsBtn">éš¨æ©Ÿé¡è‰²</button> <button class="action-button" id="doneBtn">å®Œæˆ</button></div>
            </div>
        </div>
        <div class="modal" id="jieqiDetailsModal"> <!-- ç¯€æ°£/ç¯€æ—¥ Modal -->
            <div class="modal-content jieqi-content">
                <h2>ç¯€æ°£èˆ‡ç¯€æ—¥è³‡è¨Š</h2>
                <div id="jieqiDetailsContent" style="text-align: left;"></div><button class="action-button" id="closeJieqiDetailsBtn">é—œé–‰</button>
            </div>
        </div>
        <div class="modal" id="yijiDetailsModal"> <!-- å®œå¿Œ Modal -->
            <div class="modal-content yiji-content">
                <h2>å®œå¿Œè³‡è¨Š</h2>
                <div id="yijiDetailsContent" style="text-align: left;"></div><button class="action-button" id="closeYijiDetailsBtn">é—œé–‰</button>
            </div>
        </div>
        <div class="modal" id="calendarModal"> <!-- æœˆæ›† Modal -->
            <div class="calendar-content">
                <div class="calendar-header"><button id="prevMonthBtn">&lt;</button><h2 id="calendarMonthYear"></h2><button id="nextMonthBtn">&gt;</button></div>
                <div class="calendar-weekdays" id="calendarWeekdays"></div>
                <div class="calendar-grid" id="calendarGrid"></div><button class="action-button" id="closeCalendarBtn">é—œé–‰</button>
            </div>
        </div>
        <div class="modal" id="weeklyCalendarModal"> <!-- å‘¨æ›† Modal -->
            <div class="weekly-calendar-content">
                <div class="calendar-header"><button id="prevWeekBtn">&lt;</button><h2 id="weeklyCalendarTitle"></h2><button id="nextWeekBtn">&gt;</button></div>
                <div class="weekly-calendar-grid" id="weeklyCalendarGrid"></div><button class="action-button" id="closeWeeklyCalendarBtn">é—œé–‰</button>
            </div>
        </div>
        <div class="modal" id="yearlyCalendarModal"> <!-- å¹´æ›† Modal -->
            <div class="yearly-calendar-content">
                <div class="calendar-header"><button id="prevYearBtn">&lt;</button><h2 id="yearlyCalendarTitle"></h2><button id="nextYearBtn">&gt;</button></div>
                <div class="yearly-calendar-grid" id="yearlyCalendarGrid"></div><button class="action-button" id="closeYearlyCalendarBtn">é—œé–‰</button>
            </div>
        </div>
    </div>
    <div id="fullscreen-icon" title="å…¨è¢å¹•/é€€å‡ºå…¨è¢å¹•"> <!-- å…¨è¢å¹•åœ–ç¤º -->
        <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path></svg>
    </div>
	<script>
		let lastSecondTensDigit = -1; // ç”¨æ–¼è¿½è¹¤ç§’æ•¸çš„åä½æ•¸è®ŠåŒ–ï¼Œè§¸ç™¼éš¨æ©Ÿç§»å‹•å’Œæƒæç·šæ¨¡å¼åˆ‡æ›
		let scanlinePatternIsA = true; // ç”¨æ–¼è¿½è¹¤ç•¶å‰æƒæç·šæ¨¡å¼æ˜¯Aé‚„æ˜¯B
		let lastMarqueeContent = ''; // ç”¨æ–¼åˆ¤æ–·è·‘é¦¬ç‡ˆå…§å®¹æ˜¯å¦éœ€è¦æ›´æ–°ï¼Œé¿å…ä¸å¿…è¦çš„DOMæ“ä½œ
		let calendarDate = new Date(); // æœˆæ›†é¡¯ç¤ºçš„ç•¶å‰æ—¥æœŸ
		let weeklyCalendarDate = new Date(); // å‘¨æ›†é¡¯ç¤ºçš„ç•¶å‰æ—¥æœŸ
		let yearlyCalendarDate = new Date(); // å¹´æ›†é¡¯ç¤ºçš„ç•¶å‰æ—¥æœŸ
		let yearlyDataCache = { year: -1, holidays: [], jieqi: [] }; // ç”¨æ–¼å¿«å–å¹´åº¦ç¯€æ—¥å’Œç¯€æ°£è³‡æ–™
		const defaultDisplaySettings = { // é è¨­é¡¯ç¤ºè¨­å®šç‰©ä»¶
			showAmPm: true, showGregorianYear: true, showGregorianMonth: true, showGregorianDay: true, showGregorianWeekday: true,
			showMinguoYear: true, showLunarMonth: true, showLunarDay: true, showLunarShiChen: true, showJieqi: true, showHolidays: true,
			textColor: '#00FF00', backgroundColor: '#000000', gregorianYearColor: '#00FF00', gregorianMonthColor: '#00FF00',
			gregorianDayColor: '#00FF00', gregorianWeekdayColor: '#00FF00', minguoYearColor: '#00FF00', lunarMonthColor: '#00FF00',
			lunarDayColor: '#00FF00', lunarShiChenColor: '#00FF00', jieqiColor: '#00FF00', holidayColor: '#00FFFF',
			enableTextScanline: false, enableBackgroundScanline: false, enableMovement: true
		};
		let displaySettings = { ...defaultDisplaySettings }; // ç•¶å‰é¡¯ç¤ºè¨­å®šï¼Œåˆå§‹åŒ–ç‚ºé è¨­å€¼

		function saveSettings() { try { localStorage.setItem('displaySettings', JSON.stringify(displaySettings)); } catch (e) { console.error("å„²å­˜è¨­å®šè‡³ localStorage å¤±æ•—:", e); } } // å°‡ç•¶å‰è¨­å®šå„²å­˜åˆ° localStorage
		function loadSettings() { // å¾ localStorage è¼‰å…¥è¨­å®š
			try {
				const settingsJson = localStorage.getItem('displaySettings'); // å¾ localStorage ç²å–è¨­å®šå­—ä¸²
				if (settingsJson) { displaySettings = Object.assign({ ...defaultDisplaySettings }, JSON.parse(settingsJson)); } // åˆä½µè¼‰å…¥çš„è¨­å®šèˆ‡é è¨­è¨­å®š
			} catch (e) { console.error("å¾ localStorage è§£æè¨­å®šå¤±æ•—:", e); displaySettings = { ...defaultDisplaySettings }; } // è¼‰å…¥å¤±æ•—æ™‚ä½¿ç”¨é è¨­è¨­å®š
		}
		function updateSettingsModalUI() { // æ›´æ–°è¨­å®šå½ˆå‡ºè¦–çª—çš„UIå…ƒç´ ç‹€æ…‹
			for (const key in displaySettings) { // éæ­·æ‰€æœ‰è¨­å®š
				const element = document.getElementById(key); // ç²å–å°æ‡‰IDçš„å…ƒç´ 
				if (element) { // å¦‚æœå…ƒç´ å­˜åœ¨
					if (element.type === 'checkbox') { element.checked = displaySettings[key]; } // å¦‚æœæ˜¯è¤‡é¸æ¡†ï¼Œè¨­å®šå…¶é¸ä¸­ç‹€æ…‹
					else if (element.type === 'color') { element.value = displaySettings[key]; } // å¦‚æœæ˜¯é¡è‰²é¸æ“‡å™¨ï¼Œè¨­å®šå…¶å€¼
				}
			}
		}
		function getShengXiaoEmoji(shengXiaoName) { const emojiMap = { 'é¼ ': 'ğŸ­', 'ç‰›': 'ğŸ®', 'è™': 'ğŸ…', 'å…”': 'ğŸ°', 'é¾': 'ğŸ‰', 'è›‡': 'ğŸ', 'é¦¬': 'ğŸ', 'ç¾Š': 'ğŸ‘', 'çŒ´': 'ğŸ’', 'é›': 'ğŸ”', 'ç‹—': 'ğŸ¶', 'è±¬': 'ğŸ–' }; return emojiMap[shengXiaoName] || shengXiaoName; } // æ ¹æ“šç”Ÿè‚–åç¨±è¿”å›å°æ‡‰çš„Emoji
		function getJieqiDescription(jieqiName) { const descriptions = { 'ç«‹æ˜¥': 'æ˜¥å­£é–‹å§‹ï¼Œè¬ç‰©å¾©ç”¦ï¼Œæ°£æº«å›å‡ã€‚', 'é›¨æ°´': 'é™é›¨å¢å¤šï¼Œè‰æœ¨èŒå‹•ï¼Œæ˜¥è€•é–‹å§‹ã€‚', 'é©šèŸ„': 'æ˜¥é›·éŸ¿å‹•ï¼Œé©šé†’å†¬çœ å‹•ç‰©ï¼Œæ°£æº«æ¼¸å‡ã€‚', 'æ˜¥åˆ†': 'æ™å¤œç­‰é•·ï¼Œæ˜¥æ„ç›ç„¶ï¼Œå—åŒ—åŠçƒæ°£æº«è¶¨æ–¼å¹³è¡¡ã€‚', 'æ¸…æ˜': 'æ°£å€™æ¸…çˆ½æ˜æœ—ï¼Œè¬ç‰©æ½”æ·¨ï¼Œæ˜¯æƒå¢“ç¥­ç¥–çš„æ—¥å­ã€‚', 'ç©€é›¨': 'é›¨æ°´æ»‹æ½¤ï¼Œç©€ç‰©ç”Ÿé•·ï¼Œæ˜¯æ’­ç¨®ç§»è‹—çš„å¥½æ™‚ç¯€ã€‚', 'ç«‹å¤': 'å¤å­£é–‹å§‹ï¼Œè¬ç‰©ç¹èŒ‚ï¼Œæ°£æº«æ˜é¡¯å‡é«˜ã€‚', 'å°æ»¿': 'éº¥é¡ç­‰å¤ç†Ÿä½œç‰©ç±½ç²’é–‹å§‹é£½æ»¿ï¼Œä½†å°šæœªæˆç†Ÿã€‚', 'èŠ’ç¨®': 'æœ‰èŠ’ä½œç‰©ï¼ˆå¦‚éº¥ã€ç¨»ï¼‰æˆç†Ÿï¼Œå¯ä»¥æ”¶ç©«å’Œæ’­ç¨®ã€‚', 'å¤è‡³': 'åŒ—åŠçƒç™½æ™æœ€é•·ï¼Œé™½æ°£æœ€ç››ï¼Œæ˜¯ç››å¤çš„é–‹å§‹ã€‚', 'å°æš‘': 'å¤©æ°£é–‹å§‹ç‚ç†±ï¼Œä½†é‚„æœªåˆ°æœ€ç†±çš„æ™‚å€™ã€‚', 'å¤§æš‘': 'ä¸€å¹´ä¸­æœ€ç‚ç†±çš„æ™‚æœŸï¼Œæ¿•ç†±äº¤è’¸ã€‚', 'ç«‹ç§‹': 'ç§‹å­£é–‹å§‹ï¼Œæ°£æº«é€æ¼¸ä¸‹é™ï¼Œä½†ä»æœ‰æš‘ç†±ã€‚', 'è™•æš‘': 'æš‘æ°£æ¼¸é€€ï¼Œå¤©æ°£è½‰æ¶¼ï¼Œä½†ä»æœ‰ã€Œç§‹è€è™ã€ã€‚', 'ç™½éœ²': 'å¤©æ°£è½‰æ¶¼ï¼Œæ°´æ°£å‡çµæˆéœ²ç ï¼Œå¤©æ°£æ¼¸å¯’ã€‚', 'ç§‹åˆ†': 'æ™å¤œç­‰é•·ï¼Œç§‹é«˜æ°£çˆ½ï¼Œæ˜¯æ”¶ç©«çš„å­£ç¯€ã€‚', 'å¯’éœ²': 'æ°£æº«æ›´ä½ï¼Œéœ²æ°´æ›´å¤šï¼Œå¤©æ°£è½‰å†·ã€‚', 'éœœé™': 'å¤©æ°£æ¼¸å†·ï¼Œéœ²æ°´å‡çµæˆéœœï¼Œæ˜¯ç§‹å­£çš„æœ€å¾Œä¸€å€‹ç¯€æ°£ã€‚', 'ç«‹å†¬': 'å†¬å­£é–‹å§‹ï¼Œè¬ç‰©æ”¶è—ï¼Œæ°£æº«é¡¯è‘—ä¸‹é™ã€‚', 'å°é›ª': 'é–‹å§‹é™é›ªï¼Œä½†é›ªé‡ä¸å¤§ï¼Œæ°£æº«æŒçºŒèµ°ä½ã€‚', 'å¤§é›ª': 'é™é›ªé‡å¢å¤šï¼Œå¤©æ°£æ›´å†·ï¼Œå†°å‡ç¾è±¡å¸¸è¦‹ã€‚', 'å†¬è‡³': 'åŒ—åŠçƒç™½æ™æœ€çŸ­ï¼Œå¤œæ™šæœ€é•·ï¼Œæ˜¯æ•¸ä¹å¯’å¤©çš„é–‹å§‹ã€‚', 'å°å¯’': 'å¤©æ°£å¯’å†·ï¼Œå°šæœªé”åˆ°æœ€å†·ã€‚', 'å¤§å¯’': 'ä¸€å¹´ä¸­æœ€å¯’å†·çš„æ™‚æœŸï¼Œåš´å¯’å†°å‡ã€‚' }; return descriptions[jieqiName] || 'æ­¤ç¯€æ°£ç„¡è©³ç´°èªªæ˜ã€‚'; } // æ ¹æ“šç¯€æ°£åç¨±è¿”å›è©³ç´°æè¿°
		function getHolidays(year) { // ç²å–æŒ‡å®šå¹´ä»½çš„ç¯€æ—¥åˆ—è¡¨
			const holidays = [ { name: 'å…ƒæ—¦', date: new Date(year, 0, 1) }, { name: 'å’Œå¹³ç´€å¿µæ—¥', date: new Date(year, 1, 28) }, { name: 'å…’ç«¥ç¯€', date: new Date(year, 3, 4) }, { name: 'æ¸…æ˜ç¯€', date: new Date(year, 3, 4) }, { name: 'å‹å‹•ç¯€', date: new Date(year, 4, 1) }, { name: 'åœ‹æ…¶æ—¥', date: new Date(year, 9, 10) }, { name: 'è–èª•ç¯€', date: new Date(year, 11, 25) } ]; // å…¬æ›†ç¯€æ—¥
			const lunarHolidays = [{m:1,d:1,n:'è¾²æ›†æ–°å¹´'}, {m:5,d:5,n:'ç«¯åˆç¯€'}, {m:7,d:15,n:'ä¸­å…ƒç¯€'}, {m:8,d:15,n:'ä¸­ç§‹ç¯€'}, {m:9,d:9,n:'é‡é™½ç¯€'}]; // è¾²æ›†ç¯€æ—¥
			lunarHolidays.forEach(lh => { const solarDate = Lunar.fromYmd(year, lh.m, lh.d).getSolar(); holidays.push({ name: lh.n, date: new Date(solarDate.getYear(), solarDate.getMonth() - 1, solarDate.getDay()) }); }); // è¨ˆç®—è¾²æ›†ç¯€æ—¥çš„å…¬æ›†æ—¥æœŸ
			const nextLunarNewYearSolar = Lunar.fromYmd(year + 1, 1, 1).getSolar(); // ä¸‹ä¸€å¹´è¾²æ›†æ–°å¹´
			holidays.push({ name: 'é™¤å¤•', date: new Date(nextLunarNewYearSolar.getYear(), nextLunarNewYearSolar.getMonth() - 1, nextLunarNewYearSolar.getDay() - 1) }); // è¨ˆç®—é™¤å¤•
			holidays.sort((a, b) => a.date.getTime() - b.date.getTime()); // æ ¹æ“šæ—¥æœŸæ’åº
			return holidays; // è¿”å›ç¯€æ—¥åˆ—è¡¨
		}
		function getJieqiForYear(year) { // ç²å–æŒ‡å®šå¹´ä»½çš„ç¯€æ°£åˆ—è¡¨
			const jieqiNameMap = { 'å°å¯’': 'å°å¯’', 'å¤§å¯’': 'å¤§å¯’', 'ç«‹æ˜¥': 'ç«‹æ˜¥', 'é›¨æ°´': 'é›¨æ°´', 'æƒŠè›°': 'é©šèŸ„', 'æ˜¥åˆ†': 'æ˜¥åˆ†', 'æ¸…æ˜': 'æ¸…æ˜', 'è°·é›¨': 'ç©€é›¨', 'ç«‹å¤': 'ç«‹å¤', 'å°æ»¡': 'å°æ»¿', 'èŠ’ç§': 'èŠ’ç¨®', 'å¤è‡³': 'å¤è‡³', 'å°æš‘': 'å°æš‘', 'å¤§æš‘': 'å¤§æš‘', 'ç«‹ç§‹': 'ç«‹ç§‹', 'å¤„æš‘': 'è™•æš‘', 'ç™½éœ²': 'ç™½éœ²', 'ç§‹åˆ†': 'ç§‹åˆ†', 'å¯’éœ²': 'å¯’éœ²', 'éœœé™': 'éœœé™', 'ç«‹å†¬': 'ç«‹å†¬', 'å°é›ª': 'å°é›ª', 'å¤§é›ª': 'å¤§é›ª', 'å†¬è‡³': 'å†¬è‡³' }; // ç°¡è½‰ç¹å°ç…§è¡¨
			const lunar = Lunar.fromYmd(year, 1, 1); // ç²å–è©²å¹´çš„ä¸€å€‹lunarå¯¦ä¾‹
			const jieqiTable = lunar.getJieQiTable(); // å¾å¯¦ä¾‹ä¸­ç²å–å…¨å¹´çš„ç¯€æ°£è¡¨
			return Object.entries(jieqiTable).map(([name, dateStr]) => ({ name: jieqiNameMap[name] || name, date: new Date(dateStr) })).sort((a, b) => a.date.getTime() - b.date.getTime()); // å°‡ç¯€æ°£è¡¨è½‰æ›ç‚ºç‰©ä»¶é™£åˆ—ä¸¦æ’åº
		}
		function convertYiJiToTraditional(yijiArray) { // è½‰æ›å®œå¿Œç‚ºç¹é«”ä¸­æ–‡
			// å¸¸ç”¨ç°¡è½‰ç¹å–®å­—å°ç…§è¡¨ï¼Œç¢ºä¿è½‰æ›çš„è¦†è“‹ç¯„åœå’Œæº–ç¢ºæ€§
			const s2tMap = {
				'å¼€': 'é–‹', 'çº³': 'ç´', 'è´¢': 'è²¡', 'æŒ‚': 'æ›','æ¢': 'æ¨‘', 'åŠ¨': 'å‹•', 'ç§': 'ç¨®', 'å¯': 'å•Ÿ', 'é’»': 'é‘½','è®¢': 'è¨‚', 'ç«–': 'è±', 'é—¨': 'é–€', 'è¯': 'è©', 'è®¼': 'è¨Ÿ','å‘': 'é«®', 'å…»': 'é¤Š', 'é©¬': 'é¦¬', 'ç»': 'ç¶“', 'ç»œ': 'çµ¡','ç›–': 'è“‹', 'ä¼š': 'æœƒ', 'å­¦': 'å­¸', 'ä¹ ': 'ç¿’', 'è‰º': 'è—','åŒ»': 'é†«', 'è£…': 'è£', 'å¸': 'å¸³', 'æ®“': 'æ®®', 'ç»“': 'çµ','ç½‘': 'ç¶²', 'æ¸”': 'æ¼', 'çŒ': 'çµ', 'äº²': 'è¦ª', 'è¿›': 'é€²', 'æ‰«': 'æƒ',
			};

			// éæ­·å®œå¿Œé™£åˆ—ä¸­çš„æ¯ä¸€å€‹è©
			return yijiArray.map(item => {
				// ä½¿ç”¨ trim() ç§»é™¤è©å½™å‰å¾Œå¯èƒ½å­˜åœ¨çš„ç©ºç™½å­—å…ƒ
				const trimmedItem = item.trim();
				let traditionalItem = '';
				// éæ­·è©ä¸­çš„æ¯ä¸€å€‹å­—å…ƒ
				for (let i = 0; i < trimmedItem.length; i++) {
					// å¦‚æœåœ¨å°ç…§è¡¨è£¡æ‰¾åˆ°å°æ‡‰çš„ç¹é«”å­—ï¼Œå°±ç”¨ç¹é«”å­—ï¼Œå¦å‰‡ç”¨åŸä¾†çš„å­—
					traditionalItem += s2tMap[trimmedItem[i]] || trimmedItem[i];
				}
				return traditionalItem;
			});
		}
		function getShiChen(h) { const shichenMap = { 23: 'å­', 0: 'å­', 1: 'ä¸‘', 2: 'ä¸‘', 3: 'å¯…', 4: 'å¯…', 5: 'å¯', 6: 'å¯', 7: 'è¾°', 8: 'è¾°', 9: 'å·³', 10: 'å·³', 11: 'åˆ', 12: 'åˆ', 13: 'æœª', 14: 'æœª', 15: 'ç”³', 16: 'ç”³', 17: 'é…‰', 18: 'é…‰', 19: 'æˆŒ', 20: 'æˆŒ', 21: 'äº¥', 22: 'äº¥' }; return shichenMap[h] || ''; } // æ ¹æ“šå°æ™‚æ•¸ç²å–å°æ‡‰çš„æ™‚è¾°
		function getDetailedTimePeriod(hour) { const periodMap = { 0: 'å‡Œæ™¨', 1: 'å‡Œæ™¨', 2: 'å‡Œæ™¨', 3: 'å‡Œæ™¨', 4: 'å‡Œæ™¨', 5: 'æ¸…æ™¨', 6: 'æ¸…æ™¨', 7: 'æ¸…æ™¨', 8: 'æ¸…æ™¨', 9: 'ä¸Šåˆ', 10: 'ä¸Šåˆ', 11: 'ä¸Šåˆ', 12: 'ä¸­åˆ', 13: 'ä¸‹åˆ', 14: 'ä¸‹åˆ', 15: 'ä¸‹åˆ', 16: 'ä¸‹åˆ', 17: 'å‚æ™š', 18: 'å‚æ™š', 19: 'å¤œæ™š', 20: 'å¤œæ™š', 21: 'å¤œæ™š', 22: 'å¤œæ™š', 23: 'æ·±å¤œ' }; return periodMap[hour] || ''; } // æ ¹æ“šå°æ™‚æ•¸ç²å–è©³ç´°æ™‚é–“æ®µæè¿°
		function updateMarquee(combinedJieqiHolidayText) { // æ›´æ–°ç¯€æ°£/ç¯€æ—¥è·‘é¦¬ç‡ˆé¡¯ç¤º
			const marqueeContainer = document.getElementById('jieqiHolidayMarqueeContainer'), marqueeInner = document.getElementById('jieqiHolidayMarqueeInner');
			if (!marqueeContainer || !marqueeInner) return;
			const contentSpan = marqueeInner.querySelector('.jieqi-holiday-marquee-content'), duplicateSpan = marqueeInner.querySelector('.jieqi-holiday-marquee-content-duplicate');
			if (!contentSpan || !duplicateSpan) return;
			contentSpan.innerHTML = combinedJieqiHolidayText;
			requestAnimationFrame(() => { // åœ¨ä¸‹ä¸€å¹€å‹•ç•«ä¸­åŸ·è¡Œ
				const contentWidth = contentSpan.scrollWidth, containerWidth = marqueeContainer.offsetWidth;
				if (contentWidth > containerWidth) { // å¦‚æœå…§å®¹å¯¬åº¦å¤§æ–¼å®¹å™¨å¯¬åº¦ï¼Œå‰‡æ»¾å‹•
					duplicateSpan.innerHTML = combinedJieqiHolidayText;
					marqueeContainer.classList.add('scrolling');
					marqueeInner.style.animationDuration = `${contentWidth / 50}s`;
					marqueeInner.style.animationPlayState = 'running';
				} else { // å¦å‰‡åœæ­¢æ»¾å‹•
					duplicateSpan.innerHTML = '';
					marqueeContainer.classList.remove('scrolling');
					marqueeInner.style.animationPlayState = 'paused';
				}
			});
		}
		function updateDateTime() { // æ›´æ–°ä¸»ç•«é¢æ—¥æœŸæ™‚é–“é¡¯ç¤º
			const now = new Date();
			const backgroundOverlay = document.getElementById('background-scanline-overlay'), textOverlay = document.getElementById('text-scanline-overlay');
			const secondTensDigit = Math.floor(now.getSeconds() / 10);
			if (secondTensDigit !== lastSecondTensDigit) { // æ¯10ç§’è§¸ç™¼ä¸€æ¬¡
				if(displaySettings.enableMovement) { moveRandomly(); }
				scanlinePatternIsA = !scanlinePatternIsA;
				lastSecondTensDigit = secondTensDigit;
			}
			backgroundOverlay.classList.toggle('active', displaySettings.enableBackgroundScanline); // æ›´æ–°èƒŒæ™¯æƒæç·š
			if (displaySettings.enableBackgroundScanline) { backgroundOverlay.classList.toggle('pattern-a', scanlinePatternIsA); backgroundOverlay.classList.toggle('pattern-b', !scanlinePatternIsA); }
			textOverlay.classList.toggle('active', displaySettings.enableTextScanline); // æ›´æ–°æ–‡å­—æƒæç·š
			if (displaySettings.enableTextScanline) { textOverlay.classList.toggle('pattern-a', !scanlinePatternIsA); textOverlay.classList.toggle('pattern-b', scanlinePatternIsA); }
			document.documentElement.style.setProperty('--page-background-color', displaySettings.backgroundColor);
			const parts = new Intl.DateTimeFormat('zh-Hant', { hour: 'numeric', minute: '2-digit', second: '2-digit', hour12: displaySettings.showAmPm }).formatToParts(now);
			const hourPart = parts.find(p => p.type === 'hour')?.value.padStart(2, '0') || '00', minutePart = parts.find(p => p.type === 'minute')?.value || '00', secondPart = parts.find(p => p.type === 'second')?.value || '00';
			document.getElementById('hoursMinutesDisplay').textContent = `${hourPart}:${minutePart}`;
			document.getElementById('secondsDisplay').textContent = secondPart;
			const amPmText = displaySettings.showAmPm ? getDetailedTimePeriod(now.getHours()) : '';
			document.getElementById('amPmDisplay').textContent = amPmText;
			document.getElementById('amPmDisplay').style.display = amPmText ? 'block' : 'none';
			document.getElementById('timeTextContainer').style.color = displaySettings.textColor;
			let gregorianParts = []; // çµ„åˆå…¬æ›†æ—¥æœŸ
			if (displaySettings.showGregorianYear) gregorianParts.push(`<span class="gregorian-year-target" style="color: ${displaySettings.gregorianYearColor}; cursor: pointer;">${now.getFullYear()}å¹´<\/span>`);
			if (displaySettings.showGregorianMonth) gregorianParts.push(`<span style="color: ${displaySettings.gregorianMonthColor};">${(now.getMonth() + 1).toString().padStart(2, '0')}æœˆ<\/span>`);
			if (displaySettings.showGregorianDay) gregorianParts.push(`<span style="color: ${displaySettings.gregorianDayColor};">${now.getDate().toString().padStart(2, '0')}æ—¥<\/span>`);
			if (displaySettings.showGregorianWeekday) gregorianParts.push(`<span class="weekday-target" style="color: ${displaySettings.gregorianWeekdayColor}; cursor: pointer;">å‘¨${['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'][now.getDay()]}<\/span>`);
			document.getElementById('gregorianDateDisplay').innerHTML = gregorianParts.join('');
			document.getElementById('gregorianDateDisplay').style.display = gregorianParts.length > 0 ? 'block' : 'none';
			let lunarParts = [], combinedJieqiHolidayText = ''; // è™•ç†è¾²æ›†ã€ç¯€æ°£ã€ç¯€æ—¥
			if (typeof Lunar !== 'undefined') {
				const currentYear = now.getFullYear(); // ç²å–ç•¶å‰å¹´ä»½
				if (yearlyDataCache.year !== currentYear) { // å¦‚æœå¿«å–çš„å¹´ä»½ä¸æ˜¯ä»Šå¹´ï¼Œå‰‡æ›´æ–°å¿«å–
					yearlyDataCache = { year: currentYear, holidays: getHolidays(currentYear), jieqi: getJieqiForYear(currentYear) };
				}
				const solar = Solar.fromDate(now), lunar = solar.getLunar();
				if (displaySettings.showMinguoYear) lunarParts.push(`<span class="lunar-year-target" style="color: ${displaySettings.minguoYearColor}; cursor: pointer;">${now.getFullYear() - 1911}å¹´${getShengXiaoEmoji(lunar.getYearShengXiao())}<\/span>`);
				if (displaySettings.showLunarMonth) lunarParts.push(`<span style="color: ${displaySettings.lunarMonthColor};">${lunar.getMonthInChinese().replace('é—°', 'é–')}æœˆ<\/span>`);
				if (displaySettings.showLunarDay) lunarParts.push(`<span class="lunar-day-target lunar-date-clickable" style="color: ${displaySettings.lunarDayColor};">${lunar.getDayInChinese()}<\/span>`);
				if (displaySettings.showLunarShiChen) lunarParts.push(`<span class="lunar-shichen-target lunar-shichen-clickable" style="color: ${displaySettings.lunarShiChenColor};">${getShiChen(now.getHours())}æ™‚<\/span>`);
				
				const allJieqis = yearlyDataCache.jieqi; // å¾å¿«å–ä¸­ç²å–ç¯€æ°£
				let jieQiText = '', currentJieqiInfo = allJieqis.find(jq => jq.date.toDateString() === now.toDateString());
				if (!currentJieqiInfo) { currentJieqiInfo = allJieqis.find(jq => jq.date > now); }
				if (displaySettings.showJieqi && currentJieqiInfo) {
					const diffTime = currentJieqiInfo.date.getTime() - now.getTime();
					const daysUntil = Math.ceil(diffTime / 86400000);
					jieQiText = (daysUntil === 0) ? `${currentJieqiInfo.name}` : `${daysUntil}â¡${currentJieqiInfo.name}`;
				}
				const holidays = yearlyDataCache.holidays; // å¾å¿«å–ä¸­ç²å–ç¯€æ—¥
				let holidayText = '', currentHolidayInfo = holidays.find(h => h.date.toDateString() === now.toDateString());
				if (!currentHolidayInfo) { currentHolidayInfo = holidays.find(h => h.date > now); }
				if (displaySettings.showHolidays && currentHolidayInfo) {
					const diffTime = currentHolidayInfo.date.getTime() - now.getTime();
					const daysUntil = Math.ceil(diffTime / 86400000);
					holidayText = (daysUntil === 0) ? `${currentHolidayInfo.name}` : `${daysUntil}â¡${currentHolidayInfo.name}`;
				}
				let marqueeParts = [];
				if(jieQiText) marqueeParts.push(`<span style="color: ${displaySettings.jieqiColor};">${jieQiText}<\/span>`);
				if(holidayText) marqueeParts.push(`<span style="color: ${displaySettings.holidayColor};">${holidayText}<\/span>`);
				combinedJieqiHolidayText = marqueeParts.join(' ');
				
				const marqueeContainer = document.getElementById('jieqiHolidayMarqueeContainer'); // å°‡è©³ç´°è³‡è¨Šå­˜å„²åˆ°dataå±¬æ€§ä¸­
				marqueeContainer.dataset.jieqiName = currentJieqiInfo ? currentJieqiInfo.name : '';
				marqueeContainer.dataset.jieqiDate = currentJieqiInfo ? currentJieqiInfo.date.toISOString() : '';
				marqueeContainer.dataset.daysUntilNextJieqi = currentJieqiInfo ? Math.ceil((currentJieqiInfo.date.getTime() - now.getTime()) / 86400000) : '';
				marqueeContainer.dataset.currentHolidayName = holidays.find(h => h.date.toDateString() === now.toDateString())?.name || '';
				const nextHolidayInfo = holidays.find(h => h.date > now);
				marqueeContainer.dataset.nextHolidayName = nextHolidayInfo ? nextHolidayInfo.name : '';
				marqueeContainer.dataset.nextHolidayDate = nextHolidayInfo ? nextHolidayInfo.date.toISOString() : '';
				marqueeContainer.dataset.nextHolidayDaysUntil = nextHolidayInfo ? Math.ceil((nextHolidayInfo.date.getTime() - now.getTime()) / 86400000) : '';
			}
			document.getElementById('lunarDateDisplay').innerHTML = lunarParts.join('');
			document.getElementById('lunarDateDisplay').style.display = lunarParts.length > 0 ? 'inline-block' : 'none';
			const marqueeIsVisible = displaySettings.showJieqi || displaySettings.showHolidays;
			document.getElementById('jieqiHolidayMarqueeContainer').style.display = marqueeIsVisible ? 'block' : 'none';
			if (marqueeIsVisible && lastMarqueeContent !== combinedJieqiHolidayText) { updateMarquee(combinedJieqiHolidayText); lastMarqueeContent = combinedJieqiHolidayText; }
			else if (!marqueeIsVisible && lastMarqueeContent !== '') { updateMarquee(''); lastMarqueeContent = ''; }
		}
		function moveRandomly() { // éš¨æ©Ÿç§»å‹•æ—¥æœŸæ™‚é–“é¡¯ç¤ºå…ƒç´ 
			const displayElement = document.getElementById('dateTimeDisplay'), viewportWidth = window.innerWidth, viewportHeight = window.innerHeight;
			const elementRect = displayElement.getBoundingClientRect(), safeMargin = 20;
			const maxX = (viewportWidth - elementRect.width) / 2 - safeMargin, maxY = (viewportHeight - elementRect.height) / 2 - safeMargin;
			const newTargetX = Math.random() * (maxX * 2) - maxX, newTargetY = Math.random() * (maxY * 2) - maxY;
			displayElement.style.transform = `translate(calc(-50% + ${newTargetX}px), calc(-60% + ${newTargetY}px))`;
		}
		function resetPosition() { document.getElementById('dateTimeDisplay').style.transform = `translate(-50%, -60%)`; } // é‡è¨­æ—¥æœŸæ™‚é–“é¡¯ç¤ºå…ƒç´ çš„ä½ç½®
		function restoreDefaults() { displaySettings = { ...defaultDisplaySettings }; saveSettings(); updateSettingsModalUI(); scanlinePatternIsA = true; if (displaySettings.enableMovement) { moveRandomly(); } else { resetPosition(); } lastMarqueeContent = ''; updateDateTime(); } // æ¢å¾©æ‰€æœ‰è¨­å®šç‚ºé è¨­å€¼
		function getRandomColor() { return '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0'); } // ç²å–ä¸€å€‹éš¨æ©Ÿçš„åå…­é€²åˆ¶é¡è‰²ç¢¼
		function setRandomColors() { for (const key in displaySettings) { if (key.toLowerCase().includes('color')) { displaySettings[key] = getRandomColor(); } } saveSettings(); updateSettingsModalUI(); updateDateTime(); } // è¨­å®šæ‰€æœ‰é¡è‰²ç›¸é—œçš„è¨­å®šç‚ºéš¨æ©Ÿé¡è‰²
		function generateCalendar(year, month) { // ç”Ÿæˆæœˆæ›†
			const grid = document.getElementById('calendarGrid'), monthYear = document.getElementById('calendarMonthYear'), weekdays = document.getElementById('calendarWeekdays');
			if(!grid || !monthYear || !weekdays) return;
			grid.innerHTML = ''; weekdays.innerHTML = '';
			['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'].forEach(day => { const el = document.createElement('div'); el.textContent = day; weekdays.appendChild(el); });
			monthYear.textContent = `${year}å¹´ ${month + 1}æœˆ`;
			const firstDay = new Date(year, month, 1).getDay(), daysInMonth = new Date(year, month + 1, 0).getDate(), today = new Date();
			for (let i = 0; i < 42; i++) {
				const cell = document.createElement('div'); cell.classList.add('calendar-day');
				const dayNum = i - firstDay + 1;
				if (dayNum > 0 && dayNum <= daysInMonth) {
					const date = new Date(year, month, dayNum), lunar = Solar.fromDate(date).getLunar();
					cell.innerHTML = `<div class="gregorian-day">${dayNum}<\/div><div class="lunar-day">${lunar.getDay() === 1 ? lunar.getMonthInChinese().replace('é—°', 'é–') + 'æœˆ' : lunar.getDayInChinese()}<\/div>`;
					if (today.getFullYear() === year && today.getMonth() === month && dayNum === today.getDate()) { cell.classList.add('is-today'); }
				} else { cell.classList.add('other-month'); }
				grid.appendChild(cell);
			}
		}
		function generateWeekCalendar(baseDate) { // ç”Ÿæˆå‘¨æ›†
			const grid = document.getElementById('weeklyCalendarGrid'), title = document.getElementById('weeklyCalendarTitle');
			if (!grid || !title) return;
			grid.innerHTML = '';
			const today = new Date(), startOfWeek = new Date(baseDate);
			startOfWeek.setDate(baseDate.getDate() - baseDate.getDay());
			const endOfWeek = new Date(startOfWeek); endOfWeek.setDate(startOfWeek.getDate() + 6);
			title.textContent = `${startOfWeek.getFullYear()}å¹´${startOfWeek.getMonth() + 1}æœˆ${startOfWeek.getDate()}æ—¥ - ${endOfWeek.getFullYear()}å¹´${endOfWeek.getMonth() + 1}æœˆ${endOfWeek.getDate()}æ—¥`;
			const weekdays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];
			for (let i = 0; i < 7; i++) {
				const day = new Date(startOfWeek); day.setDate(startOfWeek.getDate() + i);
				const cell = document.createElement('div'); cell.classList.add('weekly-calendar-day');
				if (day.toDateString() === today.toDateString()) { cell.classList.add('is-today'); }
				const lunar = Solar.fromDate(day).getLunar();
				cell.innerHTML = `<div class="weekly-day-header">${weekdays[i]}<\/div><div class="weekly-gregorian-day">${day.getDate()}<\/div><div class="weekly-lunar-day">${lunar.getDay() === 1 ? lunar.getMonthInChinese().replace('é—°', 'é–') + 'æœˆ' : lunar.getDayInChinese()}<\/div>`;
				grid.appendChild(cell);
			}
		}
		function generateYearCalendar(year) { // ç”Ÿæˆå¹´æ›†
			const grid = document.getElementById('yearlyCalendarGrid'), title = document.getElementById('yearlyCalendarTitle');
			if (!grid || !title) return;
			grid.innerHTML = ''; title.textContent = `${year}å¹´`;
			const today = new Date(), weekdays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
			for (let month = 0; month < 12; month++) {
				const monthContainer = document.createElement('div'); monthContainer.classList.add('yearly-month-container');
				const monthHeader = document.createElement('div'); monthHeader.classList.add('yearly-month-header'); monthHeader.textContent = `${month + 1}æœˆ`; monthContainer.appendChild(monthHeader);
				const weekdaysDiv = document.createElement('div'); weekdaysDiv.classList.add('yearly-weekdays');
				weekdays.forEach(day => { const el = document.createElement('div'); el.textContent = day; weekdaysDiv.appendChild(el); });
				monthContainer.appendChild(weekdaysDiv);
				const dayGrid = document.createElement('div'); dayGrid.classList.add('yearly-day-grid');
				const firstDay = new Date(year, month, 1).getDay(), daysInMonth = new Date(year, month + 1, 0).getDate();
				for (let i = 0; i < firstDay; i++) { dayGrid.appendChild(document.createElement('div')); }
				for (let day = 1; day <= daysInMonth; day++) {
					const cell = document.createElement('div'); cell.classList.add('yearly-day'); cell.textContent = day;
					if (today.getFullYear() === year && today.getMonth() === month && day === today.getDate()) { cell.classList.add('is-today'); }
					dayGrid.appendChild(cell);
				}
				monthContainer.appendChild(dayGrid);
				grid.appendChild(monthContainer);
			}
		}
		window.onload = function () { // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
			loadSettings();
			updateSettingsModalUI();
			updateDateTime();
			setInterval(updateDateTime, 1000);
			if (!displaySettings.enableMovement) { resetPosition(); }
			document.querySelectorAll('.modal').forEach(modal => { // è™•ç†æ‰€æœ‰å½ˆå‡ºè¦–çª—çš„é—œé–‰é‚è¼¯
				const closeButton = modal.querySelector('.action-button[id^="close"], .action-button[id^="done"]');
				if (closeButton) { closeButton.onclick = () => modal.classList.remove('is-active'); }
				modal.addEventListener('click', (event) => { if (event.target === modal) { modal.classList.remove('is-active'); } });
			});
			document.getElementById('prevMonthBtn').onclick = () => { calendarDate.setMonth(calendarDate.getMonth() - 1); generateCalendar(calendarDate.getFullYear(), calendarDate.getMonth()); };
			document.getElementById('nextMonthBtn').onclick = () => { calendarDate.setMonth(calendarDate.getMonth() + 1); generateCalendar(calendarDate.getFullYear(), calendarDate.getMonth()); };
			document.getElementById('prevWeekBtn').onclick = () => { weeklyCalendarDate.setDate(weeklyCalendarDate.getDate() - 7); generateWeekCalendar(weeklyCalendarDate); };
			document.getElementById('nextWeekBtn').onclick = () => { weeklyCalendarDate.setDate(weeklyCalendarDate.getDate() + 7); generateWeekCalendar(weeklyCalendarDate); };
			document.getElementById('prevYearBtn').onclick = () => { yearlyCalendarDate.setFullYear(yearlyCalendarDate.getFullYear() - 1); generateYearCalendar(yearlyCalendarDate.getFullYear()); };
			document.getElementById('nextYearBtn').onclick = () => { yearlyCalendarDate.setFullYear(yearlyCalendarDate.getFullYear() + 1); generateYearCalendar(yearlyCalendarDate.getFullYear()); };
			document.querySelectorAll('.switch input[type="checkbox"]').forEach(toggle => { // è™•ç†æ‰€æœ‰é–‹é—œ
				toggle.onchange = (event) => {
					displaySettings[event.target.id] = event.target.checked;
					if (event.target.id === 'enableMovement' && !event.target.checked) { resetPosition(); }
					saveSettings(); lastMarqueeContent = ''; updateDateTime();
				};
			});
			document.querySelectorAll('input[type="color"]').forEach(colorInput => { // è™•ç†æ‰€æœ‰é¡è‰²é¸æ“‡å™¨
				colorInput.oninput = (event) => { displaySettings[event.target.id] = event.target.value; saveSettings(); updateDateTime(); };
			});
			document.getElementById('restoreDefaultsBtn').onclick = restoreDefaults;
			document.getElementById('randomColorsBtn').onclick = setRandomColors;
			document.getElementById('dateTimeDisplay').addEventListener('click', function(event) { // ä¸»é¡¯ç¤ºå€åŸŸçš„é»æ“Šäº‹ä»¶å§”æ´¾
				const target = event.target;
				if (target.closest('#secondsDisplay')) { document.getElementById('settingsModal').classList.add('is-active'); updateSettingsModalUI(); }
				else if (target.closest('.lunar-day-target') || target.closest('.lunar-shichen-target')) {
					const now = new Date();
					const lunar = Solar.fromDate(now).getLunar();
					const isShiChen = !!target.closest('.lunar-shichen-target');
					let yijiHtml = '';

					if (isShiChen) {
						const timeYi = convertYiJiToTraditional(lunar.getTimeYi()).join('ã€') || 'ç„¡';
						const timeJi = convertYiJiToTraditional(lunar.getTimeJi()).join('ã€') || 'ç„¡';
						yijiHtml = `<p><strong>æ™‚è¾°ï¼š<\/strong> ${getShiChen(now.getHours())}æ™‚<\/p><p style="margin-top: 15px;"><strong>å®œï¼š<\/strong> ${timeYi}<\/p><p style="margin-top: 15px;"><strong>å¿Œï¼š<\/strong> ${timeJi}<\/p>`;
					} else {
						const dayYi = convertYiJiToTraditional(lunar.getDayYi()).join('ã€') || 'ç„¡';
						const dayJi = convertYiJiToTraditional(lunar.getDayJi()).join('ã€') || 'ç„¡';
						yijiHtml = `<p><strong>è¾²æ›†æ—¥æœŸï¼š<\/strong> ${lunar.getMonthInChinese().replace('é—°', 'é–')}æœˆ${lunar.getDayInChinese()}<\/p><p style="margin-top: 15px;"><strong>å®œï¼š<\/strong> ${dayYi}<\/p><p style="margin-top: 15px;"><strong>å¿Œï¼š<\/strong> ${dayJi}<\/p>`;
					}
					
					document.getElementById('yijiDetailsContent').innerHTML = yijiHtml + `<p style="margin-top: 15px; font-size: 0.9em; color: #aaa;">å®œå¿Œåƒ…ä¾›åƒè€ƒï¼Œè«‹å‹¿éåº¦è¿·ä¿¡ã€‚<\/p>`;
					document.getElementById('yijiDetailsModal').classList.add('is-active');
				}
				else if (target.closest('#jieqiHolidayMarqueeContainer')) {
					const marqueeEl = target.closest('#jieqiHolidayMarqueeContainer');
					const jieqiName = marqueeEl.dataset.jieqiName, jieqiDateStr = marqueeEl.dataset.jieqiDate, daysUntilJieqi = marqueeEl.dataset.daysUntilNextJieqi;
					const currentHoliday = marqueeEl.dataset.currentHolidayName, nextHolidayName = marqueeEl.dataset.nextHolidayName, nextHolidayDateStr = marqueeEl.dataset.nextHolidayDate, daysUntilHoliday = marqueeEl.dataset.nextHolidayDaysUntil;
					let detailsHtml = '';
					if (jieqiName && jieqiDateStr) {
						const date = new Date(jieqiDateStr), formattedDate = `${date.getFullYear()}å¹´${(date.getMonth() + 1)}æœˆ${date.getDate()}æ—¥`;
						detailsHtml += (parseInt(daysUntilJieqi) === 0) ? `<p>ä»Šå¤© <strong>${jieqiName}<\/strong><\/p>` : `<p>${formattedDate} <strong>${jieqiName}<\/strong> é‚„æœ‰${daysUntilJieqi}å¤©<\/p>`;
						detailsHtml += `<p style="margin-top: 10px; font-size: 1.2em;">${getJieqiDescription(jieqiName)}<\/p>`;
					} else { detailsHtml += `<p>ç›®å‰æ²’æœ‰ç¯€æ°£è³‡è¨Šã€‚<\/p>`; }
					detailsHtml += `<hr style="margin: 20px 0; border-color: #555;">`;
					if (currentHoliday) { detailsHtml += `<p>ä»Šå¤© <strong>${currentHoliday}<\/strong><\/p>`; } 
					else if (nextHolidayName && nextHolidayDateStr) {
						const date = new Date(nextHolidayDateStr), formattedDate = `${date.getFullYear()}å¹´${(date.getMonth() + 1)}æœˆ${date.getDate()}æ—¥`;
						detailsHtml += `<p>${formattedDate} <strong>${nextHolidayName}<\/strong> é‚„æœ‰${daysUntilHoliday}å¤©<\/p>`;
					} else { detailsHtml += `<p>ç›®å‰æ²’æœ‰ç¯€æ—¥è³‡è¨Šã€‚<\/p>`; }
					document.getElementById('jieqiDetailsContent').innerHTML = detailsHtml;
					document.getElementById('jieqiDetailsModal').classList.add('is-active');
				}
				else if (target.closest('.gregorian-year-target') || target.closest('.lunar-year-target')) { yearlyCalendarDate = new Date(); generateYearCalendar(yearlyCalendarDate.getFullYear()); document.getElementById('yearlyCalendarModal').classList.add('is-active'); }
				else if (target.closest('.weekday-target')) { weeklyCalendarDate = new Date(); generateWeekCalendar(weeklyCalendarDate); document.getElementById('weeklyCalendarModal').classList.add('is-active'); }
				else if (target.closest('.gregorian-date-text') || target.closest('.lunar-date-static-text')) { calendarDate = new Date(); generateCalendar(calendarDate.getFullYear(), calendarDate.getMonth()); document.getElementById('calendarModal').classList.add('is-active'); }
			});
			const fullscreenIcon = document.getElementById('fullscreen-icon'), docElement = document.documentElement; // --- å…¨è¢å¹•åŠŸèƒ½ ---
			function toggleFullScreen() {
				const isFullscreen = document.fullscreenElement || document.webkitFullscreenElement;
				if (!isFullscreen) { const req = docElement.requestFullscreen || docElement.webkitRequestFullscreen; if (req) { req.call(docElement).catch(err => console.warn(`ç„¡æ³•é€²å…¥å…¨è¢å¹•æ¨¡å¼: ${err.message}`)); } }
				else { const exit = document.exitFullscreen || document.webkitExitFullscreen; if (exit) { exit.call(document).catch(err => console.warn(`ç„¡æ³•é€€å‡ºå…¨è¢å¹•æ¨¡å¼: ${err.message}`)); } }
			}
			fullscreenIcon.addEventListener('click', toggleFullScreen);
			function handleFullscreenChange() {
				const isFullscreen = document.fullscreenElement || document.webkitFullscreenElement;
				fullscreenIcon.style.display = isFullscreen ? 'none' : 'block';
				if (lastMarqueeContent) { updateMarquee(lastMarqueeContent); }
			}
			document.addEventListener('fullscreenchange', handleFullscreenChange);
			document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
			let inactivityTimer; // --- å…¨è¢å¹•åœ–ç¤ºé–’ç½®éš±è—åŠŸèƒ½ ---
			function hideIconOnIdle() { fullscreenIcon.style.opacity = '0'; }
			function resetIdleTimer() {
				if (fullscreenIcon.style.display !== 'none') { fullscreenIcon.style.opacity = '0.5'; }
				clearTimeout(inactivityTimer);
				inactivityTimer = setTimeout(hideIconOnIdle, 10000);
			}
			['mousemove', 'keydown', 'touchstart'].forEach(evt => document.addEventListener(evt, resetIdleTimer));
			resetIdleTimer();
		};
	</script>
</body>
</html>
