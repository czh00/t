<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™‚é–“</title>
    <style>
        /* å…¨å±€æ¨£å¼ï¼šè¨­å®šæ‰€æœ‰å…ƒç´ çš„ç›’æ¨¡å‹ç‚º border-box */
        *, *::before, *::after {
            box-sizing: border-box;
        }

        /* body æ¨£å¼ï¼šè¨­å®šé é¢ç‚ºå…¨å±é¡¯ç¤ºï¼Œå…§å®¹å±…ä¸­ï¼ŒèƒŒæ™¯ç‚ºé»‘è‰² */
        body {
            margin: 0;
            overflow: hidden; /* éš±è—è¶…å‡ºè¦–çª—çš„å…§å®¹ */
            display: flex; /* ä½¿ç”¨ Flexbox ä½ˆå±€ */
            flex-direction: column; /* å‚ç›´æ’åˆ—å­å…ƒç´  */
            justify-content: center; /* å‚ç›´å±…ä¸­å°é½Š */
            align-items: center; /* æ°´å¹³å±…ä¸­å°é½Š */
            min-height: 100vh; /* æœ€å°é«˜åº¦ç‚ºè¦–çª—é«˜åº¦ */
            width: 100vw; /* å¯¬åº¦ç‚ºè¦–çª—å¯¬åº¦ */
            position: relative; /* ç›¸å°å®šä½ */
            font-family: 'Inter', sans-serif; /* ä½¿ç”¨ Inter å­—é«” */
        }

        /* dateTimeDisplay æ¨£å¼ï¼šæ™‚é–“é¡¯ç¤ºå®¹å™¨çš„æ¨£å¼ï¼ŒåŒ…æ‹¬å­—é«”ã€é¡è‰²ã€é™°å½±å’Œå®šä½ */
        #dateTimeDisplay {
            font-family: 'Segoe UI', Arial, sans-serif; /* å­—é«”è¨­å®š */
            font-weight: bold; /* å­—é«”åŠ ç²— */
            text-align: center; /* æ–‡å­—å±…ä¸­å°é½Š */
            padding: 10px; /* å…§é‚Šè· */
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5); /* æ–‡å­—é™°å½± */
            position: absolute; /* çµ•å°å®šä½ */
            transition: transform 1s ease-in-out; /* è®Šæ›éæ¸¡æ•ˆæœ */
            transform: translate(-50%, -50%); /* å±…ä¸­å®šä½ */
            left: 50%; /* å·¦é‚Šè· 50% */
            top: 50%; /* ä¸Šé‚Šè· 50% */
        }

        /* time-text æ¨£å¼ï¼šé¡¯ç¤ºæ™‚åˆ†çš„ä¸»æ™‚é–“æ–‡å­—æ¨£å¼ */
        .time-text {
            font-size: 32vw; /* å­—é«”å¤§å°æ ¹æ“šè¦–çª—å¯¬åº¦èª¿æ•´ */
            margin-bottom: -10vw; /* åº•éƒ¨å¤–é‚Šè· */
            position: relative; /* ç›¸å°å®šä½ */
            display: inline-block; /* è¡Œå…§å¡Šç´šå…ƒç´  */
        }

        /* time-seconds æ¨£å¼ï¼šé¡¯ç¤ºç§’æ•¸çš„æ–‡å­—æ¨£å¼ */
        .time-seconds {
            font-size: 6vw; /* å­—é«”å¤§å°æ ¹æ“šè¦–çª—å¯¬åº¦èª¿æ•´ */
            display: inline-block; /* è¨­ç½®ç‚ºè¡Œå…§å¡Šç´šå…ƒç´  */
            vertical-align: 18vw; /* å°‡ç§’æ•¸å°é½Šåˆ°ä¸Šç·£ */
            margin-left: 0.5vw; /* èˆ‡åˆ†é˜çš„é–“è· */
            cursor: pointer; /* é¼ æ¨™æ‡¸åœæ™‚é¡¯ç¤ºæ‰‹å‹ */
        }

        /* gregorian-date-text æ¨£å¼ï¼šé¡¯ç¤ºå…¬æ›†æ—¥æœŸçš„æ–‡å­—æ¨£å¼ */
        .gregorian-date-text {
            font-size: 10vw; /* å­—é«”å¤§å°æ ¹æ“šè¦–çª—å¯¬åº¦èª¿æ•´ */
            margin-top: -2vw; /* æ–°å¢ï¼šå°å…¬æ›†æ—¥æœŸå…ƒç´ è¨­å®šè² ä¸Šå¤–é‚Šè· */
            margin-bottom: -4vw; /* åº•éƒ¨å¤–é‚Šè· */
            display: block; /* å¡Šç´šå…ƒç´  */
            white-space: nowrap; /* ä¸æ›è¡Œ */
        }

        /* lunar-jieqi-combined-text æ¨£å¼ï¼šé¡¯ç¤ºè¾²æ›†å’Œç¯€æ°£çš„æ–‡å­—æ¨£å¼ */
        .lunar-jieqi-combined-text {
            font-size: 6.4vw; /* å­—é«”å¤§å°æ ¹æ“šè¦–çª—å¯¬åº¦èª¿æ•´ */
            display: block; /* å¡Šç´šå…ƒç´  */
            white-space: nowrap; /* ä¸æ›è¡Œ */
        }

        /* noscript-message æ¨£å¼ï¼šç•¶ JavaScript è¢«ç¦ç”¨æ™‚é¡¯ç¤ºçš„æç¤ºè¨Šæ¯æ¨£å¼ */
        .noscript-message {
            font-size: 0.5em; /* å­—é«”å¤§å° */
            color: #FFB3BA; /* æ·ºç´…è‰² */
            margin-top: 10px; /* é ‚éƒ¨å¤–é‚Šè· */
        }

        /* è¨­å®šå½ˆå‡ºè¦–çª—çš„æ¨£å¼ */
        .settings-modal {
            display: none; /* é è¨­éš±è— */
            position: fixed; /* å›ºå®šå®šä½ */
            z-index: 100; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
            left: 0;
            top: 0;
            width: 100%; /* å…¨å¯¬ */
            height: 100%; /* å…¨é«˜ */
            overflow: auto; /* å…è¨±æ»¾å‹• */
            background-color: rgba(0, 0, 0, 0.7); /* åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
            display: flex; /* ä½¿ç”¨ Flexbox å±…ä¸­å…§å®¹ */
            justify-content: center;
            align-items: center;
        }

        /* è¨­å®šå½ˆå‡ºè¦–çª—å…§å®¹çš„æ¨£å¼ */
        .settings-content {
            background-color: #333; /* æ·±ç°è‰²èƒŒæ™¯ */
            margin: auto; /* è‡ªå‹•å¤–é‚Šè·ï¼Œç”¨æ–¼å±…ä¸­ */
            padding: 20px;
            border: 1px solid #888;
            width: 90%; /* å¯¬åº¦ä½” 90% */
            max-width: 600px; /* æœ€å¤§å¯¬åº¦ */
            border-radius: 10px; /* åœ“è§’ */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); /* é™°å½± */
            color: #00FF00; /* æ–‡å­—é¡è‰² */
            text-align: center; /* æ–‡å­—å±…ä¸­ */
            display: flex; /* ä½¿ç”¨ Flexbox é€²è¡Œæ•´é«”å…§å®¹ä½ˆå±€ */
            flex-direction: column; /* å‚ç›´å †ç–Šå…¶å­å…ƒç´  */
            gap: 15px; /* å­å…ƒç´ ä¹‹é–“çš„é–“è· */
            max-height: 90vh; /* é™åˆ¶æœ€å¤§é«˜åº¦ç‚ºè¦–çª—çš„ 90% */
            overflow-y: auto; /* å¦‚æœå…§å®¹è¶…å‡ºé«˜åº¦ï¼Œå‰‡å…è¨±å‚ç›´æ»¾å‹• */
        }

        /* è¨­å®šé …ç›®æ¨£å¼ */
        .setting-item {
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between; /* å°‡å…§å®¹åˆ†é–‹å°é½Š */
            align-items: center;
            flex-wrap: nowrap; /* é˜²æ­¢å–®å€‹è¨­å®šé …ç›®å…§å®¹æ›è¡Œ */
        }

        .setting-item label {
            font-size: 1.2em;
            flex-shrink: 0; /* é˜²æ­¢æ¨™ç±¤ç¸®å° */
            margin-right: 10px; /* æ¨™ç±¤èˆ‡é–‹é—œä¹‹é–“çš„é–“è· */
        }

        /* é–‹é—œæŒ‰éˆ•æ¨£å¼ */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
            margin-left: auto; /* å°‡é–‹é—œæ¨åˆ°å³é‚Š */
            margin-right: 10px; /* åœ¨é–‹é—œå’Œé¡è‰²é¸æ“‡å™¨ä¹‹é–“å¢åŠ é–“è· */
            flex-shrink: 0; /* é˜²æ­¢é–‹é—œç¸®å° */
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #00FF00;
        }

        input:focus + .slider {
            box-shadow: 0 0 1px #00FF00;
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        /* é¡è‰²é¸æ“‡å™¨æ¨£å¼ */
        .setting-item input[type="color"] {
            width: 40px; /* èª¿æ•´é¡è‰²é¸æ“‡å™¨å¯¬åº¦ */
            height: 34px; /* èª¿æ•´é¡è‰²é¸æ“‡å™¨é«˜åº¦ */
            border: none;
            padding: 0;
            background: none;
            cursor: pointer;
            flex-shrink: 0; /* é˜²æ­¢é¡è‰²é¸æ“‡å™¨ç¸®å° */
        }

        /* æ¢å¾©é è¨­å’Œéš¨æ©ŸæŒ‰éˆ•æ¨£å¼ */
        .action-button {
            background-color: #555;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 20px;
        }

        .action-button:hover {
            background-color: #777;
        }

        /* æŒ‰éˆ•ç¾¤çµ„æ¨£å¼ï¼Œç”¨æ–¼æ’åˆ—ã€Œæ¢å¾©é è¨­ã€ã€ã€Œéš¨æ©Ÿã€å’Œã€Œå®Œæˆã€æŒ‰éˆ• */
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px; /* æŒ‰éˆ•ä¹‹é–“çš„é–“è· */
            margin-top: 20px;
            white-space: nowrap; /* ä¸æ›è¡Œ */
        }

        /* æ–°å¢ï¼šæ—¥æ›†è¨­å®šå®¹å™¨ï¼Œç”¨æ–¼ä¸¦æ’é¡¯ç¤ºå…¬æ›†å’Œè¾²æ›†è¨­å®š */
        .calendar-settings-container {
            display: flex;
            flex-wrap: wrap; /* å…è¨±åœ¨å°è¢å¹•ä¸Šæ›è¡Œ */
            gap: 20px; /* åˆ—ä¹‹é–“çš„é–“è· */
            justify-content: space-around; /* åˆ†æ•£ç©ºé–“ */
            width: 100%; /* ä½”ç”¨å¯ç”¨å¯¬åº¦ */
        }

        /* æ–°å¢ï¼šå…¬æ›†å’Œè¾²æ›†è¨­å®šçš„åˆ—æ¨£å¼ */
        .gregorian-settings-column,
        .lunar-settings-column {
            flex: 1; /* æ¯åˆ—ä½”ç”¨ç›¸ç­‰ç©ºé–“ */
            min-width: 80px; /* æ¯åˆ—çš„æœ€å°å¯¬åº¦ï¼Œé˜²æ­¢åœ¨å°è¢å¹•ä¸Šéåº¦å£“ç¸® */
            padding: 10px;
            border: 1px solid #555; /* å¯é¸ï¼šç‚ºè¦–è¦ºåˆ†é›¢æ·»åŠ é‚Šæ¡† */
            border-radius: 8px;
            background-color: #444; /* åˆ—çš„èƒŒæ™¯é¡è‰² */
            text-align: left; /* å°‡åˆ—å…§çš„æ–‡å­—å·¦å°é½Š */
        }

        .gregorian-settings-column h3,
        .lunar-settings-column h3 {
            text-align: center; /* åˆ—æ¨™é¡Œå±…ä¸­ */
            margin-top: 0;
        }
    </style>
    <!-- åŠ å…¥å°å¤–éƒ¨ lunar-javascript å‡½å¼åº«çš„å¼•ç”¨ï¼Œç”¨æ–¼è¾²æ›†å’Œç¯€æ°£è¨ˆç®— -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lunar-javascript/1.7.0/lunar.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <!-- æ™‚é–“ã€æ—¥æœŸã€è¾²æ›†å’Œç¯€æ°£çš„é¡¯ç¤ºå®¹å™¨ -->
    <div id="dateTimeDisplay"></div>

    <!-- å¦‚æœç€è¦½å™¨ä¸æ”¯æ´ JavaScriptï¼Œé¡¯ç¤ºæ­¤è¨Šæ¯ -->
    <noscript>
            <div class="noscript-message">
                æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´æˆ–å·²ç¦ç”¨ JavaScriptã€‚
            </div>
    </noscript>

    <!-- è¨­å®šå½ˆå‡ºè¦–çª— -->
    <div id="settingsModal" class="settings-modal">
        <div class="settings-content">
            <h2>é¡¯ç¤ºè¨­å®š</h2>
            <div class="calendar-settings-container"> <!-- æ–°å¢ï¼šç”¨æ–¼ä¸¦æ’é¡¯ç¤ºå…¬æ›†å’Œè¾²æ›†è¨­å®šçš„å®¹å™¨ -->
                <div class="gregorian-settings-column"> <!-- å…¬æ›†è¨­å®šåˆ— -->
                    <h3>å…¬æ›†</h3>
                    <div class="setting-item">
                        <label for="textColor">æ™‚é–“</label>
                    <input type="color" id="textColor" value="#00FF00">
                    </div>
                    <div class="setting-item">
                        <label for="showGregorianYear">å¹´</label>
                        <label class="switch">
                            <input type="checkbox" id="showGregorianYear">
                            <span class="slider"></span>
                        </label>
                        <input type="color" id="gregorianYearColor" value="#00FF00">
                    </div>
                    <div class="setting-item">
                        <label for="showGregorianMonth">æœˆ</label>
                        <label class="switch">
                            <input type="checkbox" id="showGregorianMonth">
                            <span class="slider"></span>
                        </label>
                        <input type="color" id="gregorianMonthColor" value="#00FF00">
                    </div>
                    <div class="setting-item">
                        <label for="showGregorianDay">æ—¥</label>
                        <label class="switch">
                            <input type="checkbox" id="showGregorianDay">
                            <span class="slider"></span>
                        </label>
                        <input type="color" id="gregorianDayColor" value="#00FF00">
                    </div>
                    <div class="setting-item">
                        <label for="showGregorianWeekday">å‘¨</label>
                        <label class="switch">
                            <input type="checkbox" id="showGregorianWeekday">
                            <span class="slider"></span>
                        </label>
                        <input type="color" id="gregorianWeekdayColor" value="#00FF00">
                    </div>
                </div>

                <div class="lunar-settings-column"> <!-- è¾²æ›†è¨­å®šåˆ— -->
                    <h3>è¾²æ›†</h3>
                    <div class="setting-item">
                        <label for="showMinguoYear">å¹´</label>
                        <label class="switch">
                            <input type="checkbox" id="showMinguoYear">
                            <span class="slider"></span>
                        </label>
                        <input type="color" id="minguoYearColor" value="#00FF00">
                    </div>
                    <div class="setting-item">
                        <label for="showLunarMonth">æœˆ</label>
                        <label class="switch">
                            <input type="checkbox" id="showLunarMonth">
                            <span class="slider"></span>
                        </label>
                        <input type="color" id="lunarMonthColor" value="#00FF00">
                    </div>
                    <div class="setting-item">
                        <label for="showLunarDay">æ—¥</label>
                        <label class="switch">
                            <input type="checkbox" id="showLunarDay">
                            <span class="slider"></span>
                        </label>
                        <input type="color" id="lunarDayColor" value="#00FF00">
                    </div>
                    <div class="setting-item">
                        <label for="showLunarShiChen">æ™‚</label>
                        <label class="switch">
                            <input type="checkbox" id="showLunarShiChen">
                            <span class="slider"></span>
                        </label>
                        <input type="color" id="lunarShiChenColor" value="#00FF00">
                    </div>
                    <div class="setting-item">
                        <label for="showJieqi">ç¯€æ°£</label>
                        <label class="switch">
                            <input type="checkbox" id="showJieqi">
                            <span class="slider"></span>
                        </label>
                        <input type="color" id="jieqiColor" value="#00FF00">
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <label for="backgroundColor">èƒŒæ™¯é¡è‰²</label>
                <input type="color" id="backgroundColor" value="#000000">
            </div>

            <div class="button-group">
                <button id="restoreDefaultsBtn" class="action-button">æ¢å¾©é è¨­</button>
                <button id="randomColorsBtn" class="action-button">éš¨æ©Ÿé¡è‰²</button>
                <button id="doneBtn" class="action-button">å®Œæˆ</button>
            </div>
        </div>
    </div>

    <script>
        let lastSecondTensDigit = -1; // ç”¨æ–¼è¿½è¹¤ç§’æ•¸çš„åä½æ•¸ï¼Œä»¥è§¸ç™¼æ¯åç§’çš„éš¨æ©Ÿç§»å‹•
        let currentPosition = { x: 0, y: 0 }; // è¿½è¹¤æ™‚é–“é¡¯ç¤ºå…ƒç´ çš„ç•¶å‰ä½ç½®

        // é è¨­é¡¯ç¤ºè¨­å®šçš„åˆå§‹å€¼
        const defaultDisplaySettings = {
            showGregorianYear: true,
            showGregorianMonth: true,
            showGregorianDay: true,
            showGregorianWeekday: true,
            showMinguoYear: true,
            showLunarMonth: true,
            showLunarDay: true,
            showLunarShiChen: true,
            showJieqi: true,
            textColor: '#00FF00', // ä¸»æ™‚é–“æ–‡å­—é¡è‰²è¨­å®š
            backgroundColor: '#000000', // èƒŒæ™¯é¡è‰²è¨­å®š
            // å€‹åˆ¥é¡¯ç¤ºé …ç›®çš„é è¨­é¡è‰²è¨­å®š
            gregorianYearColor: '#00FF00',
            gregorianMonthColor: '#00FF00',
            gregorianDayColor: '#00FF00',
            gregorianWeekdayColor: '#00FF00',
            minguoYearColor: '#00FF00',
            lunarMonthColor: '#00FF00',
            lunarDayColor: '#00FF00',
            lunarShiChenColor: '#00FF00',
            jieqiColor: '#00FF00'
        };

        // displaySettings å„²å­˜ç•¶å‰æ‡‰ç”¨æ–¼é¡¯ç¤ºçš„è¨­å®šã€‚
        // ä½¿ç”¨å±•é–‹é‹ç®—ç¬¦ (...) è¤‡è£½ defaultDisplaySettingsï¼Œç¢ºä¿ displaySettings ç¨ç«‹æ–¼é è¨­å€¼ï¼Œ
        // å…è¨±ç”¨æˆ¶ä¿®æ”¹ä¸¦å„²å­˜é€™äº›è¨­å®šè€Œä¸æœƒå½±éŸ¿åŸå§‹é è¨­å€¼ã€‚
        let displaySettings = { ...defaultDisplaySettings }; 

        /**
         * å°‡é¡¯ç¤ºè¨­å®šå„²å­˜åˆ° Cookie ä¸­ã€‚
         * å°‡ displaySettings ç‰©ä»¶è½‰æ›ç‚º JSON å­—ä¸²ä¸¦å„²å­˜åˆ°åç‚º 'displaySettings' çš„ Cookie ä¸­ã€‚
         * Cookie æœ‰æ•ˆæœŸè¨­å®šç‚º 365 å¤©ï¼Œä¸¦åœ¨æ•´å€‹ç¶²ç«™è·¯å¾‘ä¸‹å¯ç”¨ã€‚
         */
        function saveSettings() {
            const settingsJson = JSON.stringify(displaySettings);
            document.cookie = `displaySettings=${settingsJson}; expires=${new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toUTCString()}; path=/`;
        }

        /**
         * å¾ Cookie ä¸­è¼‰å…¥é¡¯ç¤ºè¨­å®šã€‚
         * è®€å– 'displaySettings' Cookieï¼Œè§£æ JSON å­—ä¸²ï¼Œä¸¦æ›´æ–° displaySettings ç‰©ä»¶ã€‚
         * å¦‚æœ Cookie ä¸å­˜åœ¨æˆ–è§£æå¤±æ•—ï¼Œå°‡ä¿ç•™ç•¶å‰çš„ displaySettingsï¼ˆé è¨­å€¼æˆ–ä¹‹å‰è¼‰å…¥çš„å€¼ï¼‰ã€‚
         * é€™ç¨®éæ­·ç¢ºä¿äº†å³ä½¿åœ¨ Cookie ä¸­ç¼ºå°‘æŸäº›è¨­å®šæ™‚ï¼Œæ–°çš„é è¨­å€¼ä¹Ÿèƒ½è¢«æ‡‰ç”¨ã€‚
         */
        function loadSettings() {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                let cookie = cookies[i].trim();
                if (cookie.startsWith('displaySettings=')) {
                    try {
                        const settingsJson = cookie.substring('displaySettings='.length);
                        const loadedSettings = JSON.parse(settingsJson);
                        for (const key in loadedSettings) {
                            if (displaySettings.hasOwnProperty(key)) {
                                displaySettings[key] = loadedSettings[key];
                            }
                        }
                    } catch (e) {
                        console.error("Failed to parse display settings from cookie:", e);
                    }
                    break;
                }
            }
        }

        /**
         * æ›´æ–°è¨­å®šå½ˆå‡ºè¦–çª—ä¸­çš„æ‰€æœ‰ UI å…ƒç´ ï¼ˆé–‹é—œå’Œé¡è‰²é¸æ“‡å™¨ï¼‰ä»¥åŒ¹é…ç•¶å‰ displaySettingsã€‚
         */
        function updateSettingsModalCheckboxes() {
            document.getElementById('showGregorianYear').checked = displaySettings.showGregorianYear;
            document.getElementById('showGregorianMonth').checked = displaySettings.showGregorianMonth;
            document.getElementById('showGregorianDay').checked = displaySettings.showGregorianDay;
            document.getElementById('showGregorianWeekday').checked = displaySettings.showGregorianWeekday;
            document.getElementById('showMinguoYear').checked = displaySettings.showMinguoYear;
            document.getElementById('showLunarMonth').checked = displaySettings.showLunarMonth;
            document.getElementById('showLunarDay').checked = displaySettings.showLunarDay;
            document.getElementById('showLunarShiChen').checked = displaySettings.showLunarShiChen;
            document.getElementById('showJieqi').checked = displaySettings.showJieqi;

            document.getElementById('textColor').value = displaySettings.textColor;
            document.getElementById('backgroundColor').value = displaySettings.backgroundColor;

            document.getElementById('gregorianYearColor').value = displaySettings.gregorianYearColor;
            document.getElementById('gregorianMonthColor').value = displaySettings.gregorianMonthColor;
            document.getElementById('gregorianDayColor').value = displaySettings.gregorianDayColor;
            document.getElementById('gregorianWeekdayColor').value = displaySettings.gregorianWeekdayColor;
            document.getElementById('minguoYearColor').value = displaySettings.minguoYearColor;
            document.getElementById('lunarMonthColor').value = displaySettings.lunarMonthColor;
            document.getElementById('lunarDayColor').value = displaySettings.lunarDayColor;
            document.getElementById('lunarShiChenColor').value = displaySettings.lunarShiChenColor;
            document.getElementById('jieqiColor').value = displaySettings.jieqiColor;
        }

        /**
         * å°‡ç”Ÿè‚–åç¨±è½‰æ›ç‚ºå°æ‡‰çš„ emojiã€‚
         * @param {string} shengXiaoName - ç”Ÿè‚–çš„ä¸­æ–‡åç¨±ã€‚
         * @returns {string} å°æ‡‰çš„ç”Ÿè‚– emojiã€‚
         */
        function getShengXiaoEmoji(shengXiaoName) {
            const emojiMap = {
                'é¼ ': 'ï¿½',
                'ç‰›': 'ğŸ‚',
                'è™': 'ğŸ…',
                'å…”': 'ğŸ‡',
                'é¾': 'ğŸ‰',
                'è›‡': 'ğŸ',
                'é¦¬': 'ğŸ',
                'ç¾Š': 'ğŸ‘',
                'çŒ´': 'ğŸ’',
                'é›': 'ğŸ“',
                'ç‹—': 'ğŸ•',
                'è±¬': 'ğŸ–'
            };
            return emojiMap[shengXiaoName] || shengXiaoName; // å¦‚æœæ‰¾ä¸åˆ°å°æ‡‰çš„ emojiï¼Œå‰‡è¿”å›åŸå§‹åç¨±
        }

        /**
         * æ›´æ–°æ™‚é–“ã€æ—¥æœŸã€è¾²æ›†å’Œç¯€æ°£çš„é¡¯ç¤ºã€‚
         * æ¯ç§’å‘¼å«ä¸€æ¬¡ï¼Œä¸¦åœ¨æ¯åç§’è§¸ç™¼ä¸€æ¬¡éš¨æ©Ÿç§»å‹•æ•ˆæœã€‚
         * æ ¹æ“š displaySettings ä¸­çš„å€¼å‹•æ…‹ç”Ÿæˆ HTML ä¸¦æ‡‰ç”¨é¡è‰²ã€‚
         */
        function updateDateTime() {
            const now = new Date(); // ç²å–ç•¶å‰æ—¥æœŸå’Œæ™‚é–“
            const currentSeconds = now.getSeconds(); // ç²å–ç•¶å‰ç§’æ•¸
            const secondTensDigit = Math.floor(currentSeconds / 10); // è¨ˆç®—ç§’æ•¸çš„åä½æ•¸

            // æ¯åç§’éš¨æ©Ÿç§»å‹•ä¸€æ¬¡
            if (secondTensDigit !== lastSecondTensDigit) {
                moveRandomly(); // å‘¼å«éš¨æ©Ÿç§»å‹•å‡½æ•¸
                lastSecondTensDigit = secondTensDigit; // æ›´æ–°ç§’æ•¸çš„åä½æ•¸
            }

            // æ ¼å¼åŒ–æ™‚é–“
            const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
            const fullTimeString = now.toLocaleTimeString('zh-Hant', timeOptions);
            const timeParts = fullTimeString.split(':');
            let hoursMinutes = '';
            let seconds = '';
            if (timeParts.length === 3) {
                hoursMinutes = `${timeParts[0]}:${timeParts[1]}`;
                seconds = timeParts[2];
            } else {
                hoursMinutes = fullTimeString;
            }

            // å…¬æ›†æ—¥æœŸé‚è¼¯
            let gregorianDateHtml = '';
            if (displaySettings.showGregorianYear || displaySettings.showGregorianMonth || displaySettings.showGregorianDay || displaySettings.showGregorianWeekday) {
                const year = now.getFullYear();
                // å°‡æœˆä»½å’Œæ—¥æœŸè£œè¶³å…©ä½æ•¸
                const month = (now.getMonth() + 1).toString().padStart(2, '0');
                const day = now.getDate().toString().padStart(2, '0');
                const weekday = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'][now.getDay()];

                let gregorianParts = [];
                if (displaySettings.showGregorianYear) gregorianParts.push(`<span style="color: ${displaySettings.gregorianYearColor};">${year}å¹´</span>`);
                if (displaySettings.showGregorianMonth) gregorianParts.push(`<span style="color: ${displaySettings.gregorianMonthColor};">${month}æœˆ</span>`);
                if (displaySettings.showGregorianDay) gregorianParts.push(`<span style="color: ${displaySettings.gregorianDayColor};">${day}æ—¥</span>`);
                if (displaySettings.showGregorianWeekday) gregorianParts.push(`<span style="color: ${displaySettings.gregorianWeekdayColor};">å‘¨${weekday}</span>`);

                if (gregorianParts.length > 0) {
                    gregorianDateHtml = `<div class="gregorian-date-text">${gregorianParts.join('')}</div>`;
                }
            }

            // è¾²æ›†å’Œç¯€æ°£é‚è¼¯ (åƒ…åœ¨ lunar-javascript å‡½å¼åº«è¼‰å…¥æˆåŠŸæ™‚åŸ·è¡Œ)
            let lunarAndJieQiHtml = '';
            if ((displaySettings.showMinguoYear || displaySettings.showLunarMonth || displaySettings.showLunarDay || displaySettings.showLunarShiChen || displaySettings.showJieqi) && typeof Lunar !== 'undefined' && typeof Solar !== 'undefined') {
                const year = now.getFullYear();
                const day = now.getDate();
                const hour = now.getHours();
                const minguoYear = year - 1911;

                const solar = Solar.fromDate(now); // ä½¿ç”¨ Solar.fromDate(now) ç²å–ç•¶å‰æ—¥æœŸçš„é™½æ›†ç‰©ä»¶
                const lunar = solar.getLunar(); // æ ¹æ“šé™½æ›†ç‰©ä»¶ç²å–è¾²æ›†ç‰©ä»¶

                /**
                 * æ ¹æ“šå°æ™‚ç²å–æ™‚è¾°ã€‚
                 * @param {number} h - ç•¶å‰å°æ™‚ (0-23)ã€‚
                 * @returns {string} å°æ‡‰çš„æ™‚è¾°å­—ä¸²ã€‚
                 */
                function getShiChen(h) {
                    if (h >= 23 || h < 1) return 'å­';
                    if (h >= 1 && h < 3) return 'ä¸‘';
                    if (h >= 3 && h < 5) return 'å¯…';
                    if (h >= 5 && h < 7) return 'å¯';
                    if (h >= 7 && h < 9) return 'è¾°';
                    if (h >= 9 && h < 11) return 'å·³';
                    if (h >= 11 && h < 13) return 'åˆ';
                    if (h >= 13 && h < 15) return 'æœª';
                    if (h >= 15 && h < 17) return 'ç”³';
                    if (h >= 17 && h < 19) return 'é…‰';
                    if (h >= 19 && h < 21) return 'æˆŒ';
                    if (h >= 21 && h < 23) return 'äº¥';
                    return '';
                }

                let lunarParts = [];
                if (displaySettings.showMinguoYear) {
                    const shengXiaoEmoji = getShengXiaoEmoji(lunar.getYearShengXiao());
                    lunarParts.push(`<span style="color: ${displaySettings.minguoYearColor};">${minguoYear}å¹´${shengXiaoEmoji}</span>`);
                }
                if (displaySettings.showLunarMonth) lunarParts.push(`<span style="color: ${displaySettings.lunarMonthColor};">${lunar.getMonthInChinese().replace('é—°', 'é–')}æœˆ</span>`);
                if (displaySettings.showLunarDay) lunarParts.push(`<span style="color: ${displaySettings.lunarDayColor};">${lunar.getDayInChinese()}</span>`);
                if (displaySettings.showLunarShiChen) lunarParts.push(`<span style="color: ${displaySettings.lunarShiChenColor};">${getShiChen(hour)}æ™‚</span>`);

                let lunarDateString = lunarParts.join('');

                let jieQiText = '';
                if (displaySettings.showJieqi) {
                    const solarToday = Solar.fromDate(now);
                    const jieQisForYear = solarToday.getLunar().getJieQiTable(); // ç²å–ç•¶å‰è¾²æ›†å¹´çš„æ‰€æœ‰ç¯€æ°£è¡¨

                    let currentOrNextJieqiName = '';
                    let daysUntilNext = -1;

                    // å°‡ç¯€æ°£è¡¨è½‰æ›ç‚ºç‰©ä»¶é™£åˆ—ï¼Œä»¥ä¾¿æ–¼è™•ç†å’Œæ’åº
                    const allJieqis = Object.entries(jieQisForYear).map(([name, dateStr]) => {
                        return { name: name, date: new Date(dateStr) };
                    }).sort((a, b) => a.date.getTime() - b.date.getTime()); // æ ¹æ“šæ—¥æœŸæ’åº

                    let foundTodayJieqi = false;
                    for (const jq of allJieqis) {
                        // æª¢æŸ¥ä»Šå¤©æ˜¯å¦ç‚ºæ­¤ç¯€æ°£çš„æ—¥æœŸï¼ˆå¿½ç•¥æ™‚é–“ï¼‰
                        if (jq.date.getFullYear() === now.getFullYear() &&
                            jq.date.getMonth() === now.getMonth() &&
                            jq.date.getDate() === now.getDate()) {
                            currentOrNextJieqiName = jq.name;
                            foundTodayJieqi = true;
                            break; // æ‰¾åˆ°ä»Šå¤©çš„ç¯€æ°£ï¼Œé¡¯ç¤ºä¸¦é€€å‡º
                        }
                    }

                    if (foundTodayJieqi) {
                        jieQiText = `${currentOrNextJieqiName}`;
                    } else {
                        // å¦‚æœä»Šå¤©ä¸æ˜¯ç¯€æ°£æ—¥ï¼Œå‰‡å°‹æ‰¾ä¸‹ä¸€å€‹å³å°‡åˆ°ä¾†çš„ç¯€æ°£
                        for (const jq of allJieqis) {
                            // åªè€ƒæ…®æœªä¾†çš„æ—¥æœŸ (æˆ–è€…å¦‚æœ 'now' çš„æ™‚é–“åœ¨ç¯€æ°£æ™‚é–“ä¹‹å‰ï¼Œå‰‡ç‚ºç•¶å‰æ—¥æœŸ)
                            // ç¯€æ°£çš„æ—¥æœŸå­—ä¸²é€šå¸¸è¡¨ç¤ºè©²å¤©çš„ 00:00:00ã€‚
                            // å› æ­¤ï¼Œå¦‚æœç¾åœ¨æ˜¯ 2025-07-22 11:00:00ï¼Œè€Œç¯€æ°£æ—¥æœŸæ˜¯ 2025-07-22 00:00:00ï¼Œå‰‡ jq.date > now å°‡ç‚º falseã€‚
                            // å…ˆå‰çš„ `foundTodayJieqi` æª¢æŸ¥è™•ç†äº†åŒä¸€æ—¥æ›†æ—¥çš„æƒ…æ³ã€‚
                            // æ­¤ `else if` å€å¡Šç”¨æ–¼æœªä¾†çš„ç¯€æ°£ã€‚
                            if (jq.date > now) { 
                                const diffTime = jq.date.getTime() - now.getTime();
                                // ä½¿ç”¨ Math.ceil å‘ä¸Šå–æ•´ï¼Œå› æ­¤ 0.1 å¤©ä¹Ÿæœƒè®Šæˆ 1 å¤©
                                daysUntilNext = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                                currentOrNextJieqiName = jq.name;
                                break; // æ‰¾åˆ°ç¬¬ä¸€å€‹æœªä¾†çš„ç¯€æ°£
                            }
                        }

                        if (currentOrNextJieqiName && daysUntilNext !== -1) {
                            // å¦‚æœ daysUntilNext ç‚º 0ï¼Œè¡¨ç¤ºæ˜¯ä»Šå¤©ï¼Œä½† 'now' çš„æ™‚é–“åœ¨ç¯€æ°£æ™‚é–“ä¹‹å‰ã€‚
                            // ç„¶è€Œï¼Œ`lunar-javascript` å‡½å¼åº«çš„ç¯€æ°£æ—¥æœŸé€šå¸¸æ˜¯åœ¨åˆå¤œã€‚
                            // `foundTodayJieqi` æª¢æŸ¥æ‡‰è©²æ¶µè“‹äº†ç¯€æ°£æ—¥çš„æƒ…æ³ã€‚
                            // æ­¤è™•çš„ `else if` å€å¡Šç”¨æ–¼æœªä¾†çš„ç¯€æ°£ã€‚
                            jieQiText = `${daysUntilNext}â¡${currentOrNextJieqiName}`;
                        }
                    }
                }

                if (lunarDateString || jieQiText) {
                    lunarAndJieQiHtml = `<div class="lunar-jieqi-combined-text" style="color: ${displaySettings.lunarTextColor};">${lunarDateString}<span style="color: ${displaySettings.jieqiColor};">${jieQiText}</span></div>`;
                }
            }

            // æ›´æ–°ç•«é¢
            const dateTimeDisplay = document.getElementById('dateTimeDisplay');
            dateTimeDisplay.innerHTML = `
                <div class="time-text" style="color: ${displaySettings.textColor};">
                    <span>${hoursMinutes}</span><span class="time-seconds" id="secondsDisplay">${seconds}</span>
                </div>
                ${gregorianDateHtml}
                ${lunarAndJieQiHtml}
            `;
            document.body.style.backgroundColor = displaySettings.backgroundColor; // æ‡‰ç”¨èƒŒæ™¯é¡è‰²

            // ç‚ºç§’æ•¸å…ƒç´ æ·»åŠ é»æ“Šäº‹ä»¶ç›£è½å™¨ï¼Œé»æ“Šå¾Œé¡¯ç¤ºè¨­å®šå½ˆå‡ºè¦–çª—
            document.getElementById('secondsDisplay').onclick = function() {
                document.getElementById('settingsModal').style.display = 'flex';
                // æ›´æ–°è¨­å®šè¦–çª—ä¸­çš„é–‹é—œç‹€æ…‹ä»¥åŒ¹é…ç•¶å‰è¨­å®š
                updateSettingsModalCheckboxes();
            };
        }

        /**
         * ä½¿æ™‚é–“é¡¯ç¤ºå…ƒç´ åœ¨è¢å¹•ä¸Šéš¨æ©Ÿç§»å‹•ã€‚
         * ç§»å‹•ç¯„åœå—é™æ–¼å®‰å…¨é‚Šç•Œï¼Œä»¥ç¢ºä¿å…ƒç´ ä¸æœƒç§»å‡ºè¦–çª—ã€‚
         */
        function moveRandomly() {
            const displayElement = document.getElementById('dateTimeDisplay'); // ç²å–æ™‚é–“é¡¯ç¤ºå…ƒç´ 
            const viewportWidth = window.innerWidth; // ç²å–è¦–çª—å¯¬åº¦
            const viewportHeight = window.innerHeight; // ç²å–è¦–çª—é«˜åº¦
            const elementRect = displayElement.getBoundingClientRect(); // ç²å–å…ƒç´ çš„å¤§å°å’Œä½ç½®
            const elementWidth = elementRect.width; // å…ƒç´ å¯¬åº¦
            const elementHeight = elementRect.height; // å…ƒç´ é«˜åº¦
            const safeMargin = 20; // å…ƒç´ è·é›¢è¦–çª—é‚Šç·£çš„å®‰å…¨é‚Šè·
            const smallOffsetRange = 40; // æ¯æ¬¡éš¨æ©Ÿç§»å‹•çš„ç¯„åœ

            let currentX = currentPosition.x; // ç•¶å‰ X åº§æ¨™
            let currentY = currentPosition.y; // ç•¶å‰ Y åº§æ¨™

            // è¨ˆç®—éš¨æ©Ÿåç§»é‡
            const offsetX = (Math.random() * 2 - 1) * smallOffsetRange; // X è»¸éš¨æ©Ÿåç§»é‡
            const offsetY = (Math.random() * 2 - 1) * smallOffsetRange; // Y è»¸éš¨æ©Ÿåç§»é‡

            let newTargetX = currentX + offsetX; // æ–°çš„ç›®æ¨™ X åº§æ¨™
            let newTargetY = currentY + offsetY; // æ–°çš„ç›®æ¨™ Y åº§æ¨™

            // è¨ˆç®—å…è¨±çš„ç§»å‹•ç¯„åœï¼Œç¢ºä¿å…ƒç´ ä¸æœƒç§»å‡ºè¦–çª—
            const minAllowedX = - (viewportWidth / 2) + (elementWidth / 2) + safeMargin;
            const minAllowedY = - (viewportHeight / 2) + (elementHeight / 2) + safeMargin;
            const maxAllowedX = (viewportWidth / 2) - (elementWidth / 2) - safeMargin;
            const maxAllowedY = (viewportHeight / 2) - (elementHeight / 2) - safeMargin;

            // å°‡æ–°çš„ç›®æ¨™ä½ç½®é™åˆ¶åœ¨å…è¨±çš„ç¯„åœå…§
            newTargetX = Math.max(minAllowedX, Math.min(newTargetX, maxAllowedX));
            newTargetY = Math.max(minAllowedY, Math.min(newTargetY, maxAllowedY));

            // æ›´æ–°ç•¶å‰ä½ç½®ä¸¦æ‡‰ç”¨ CSS è®Šæ›
            currentPosition.x = newTargetX;
            currentPosition.y = newTargetY;
            // èª¿æ•´ transform ç¢ºä¿å±…ä¸­ï¼Œå› ç‚ºå…§å®¹é«˜åº¦å¯èƒ½æœƒå› é¡¯ç¤ºè¨­å®šè€Œè®ŠåŒ–
            displayElement.style.transform = `translate(calc(-50% + ${newTargetX}px), calc(-72% + ${newTargetY}px))`;
        }

        /**
         * å°‡æ‰€æœ‰è¨­å®šæ¢å¾©ç‚ºé è¨­å€¼ã€‚
         * å°‡ displaySettings é‡ç½®ç‚º defaultDisplaySettings çš„å‰¯æœ¬ï¼Œç„¶å¾Œå„²å­˜ä¸¦æ›´æ–° UIã€‚
         */
        function restoreDefaults() {
            displaySettings = { ...defaultDisplaySettings }; // å°‡ç•¶å‰è¨­å®šé‡ç½®ç‚ºé è¨­å€¼
            saveSettings(); // å„²å­˜é è¨­è¨­å®š
            updateSettingsModalCheckboxes(); // æ›´æ–°è¨­å®šè¦–çª—ä¸­çš„é¡¯ç¤º
            updateDateTime(); // æ›´æ–°ä¸»ç•«é¢é¡¯ç¤º
        }

        /**
         * ç”Ÿæˆä¸€å€‹éš¨æ©Ÿçš„åå…­é€²åˆ¶é¡è‰²ç¢¼ã€‚
         * @returns {string} éš¨æ©Ÿçš„åå…­é€²åˆ¶é¡è‰²ç¢¼ï¼Œä¾‹å¦‚ '#RRGGBB'ã€‚
         */
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        /**
         * éš¨æ©Ÿè¨­å®šæ‰€æœ‰é¡è‰²é¸é …çš„é¡è‰²ã€‚
         * æ›´æ–° displaySettings ä¸­çš„æ‰€æœ‰é¡è‰²å±¬æ€§ç‚ºéš¨æ©Ÿé¡è‰²ï¼Œç„¶å¾Œå„²å­˜ä¸¦æ›´æ–° UIã€‚
         */
        function setRandomColors() {
            displaySettings.textColor = getRandomColor();
            displaySettings.backgroundColor = getRandomColor();
            displaySettings.gregorianYearColor = getRandomColor();
            displaySettings.gregorianMonthColor = getRandomColor();
            displaySettings.gregorianDayColor = getRandomColor();
            displaySettings.gregorianWeekdayColor = getRandomColor();
            displaySettings.minguoYearColor = getRandomColor();
            displaySettings.lunarMonthColor = getRandomColor();
            displaySettings.lunarDayColor = getRandomColor();
            displaySettings.lunarShiChenColor = getRandomColor();
            displaySettings.jieqiColor = getRandomColor();

            saveSettings(); // å„²å­˜æ–°çš„éš¨æ©Ÿé¡è‰²è¨­å®š
            updateSettingsModalCheckboxes(); // æ›´æ–°è¨­å®šè¦–çª—ä¸­çš„é¡¯ç¤º
            updateDateTime(); // æ›´æ–°ä¸»ç•«é¢é¡¯ç¤º
        }


        // é é¢è¼‰å…¥å¾Œé–‹å§‹æ›´æ–°æ™‚é–“
        window.onload = function () {
            loadSettings(); // è¼‰å…¥ä¹‹å‰å„²å­˜çš„è¨­å®š
            updateSettingsModalCheckboxes(); // åœ¨è¼‰å…¥è¨­å®šå¾Œç«‹å³æ›´æ–°è¨­å®šè¦–çª—ä¸­çš„é–‹é—œç‹€æ…‹
            currentPosition = { x: 0, y: 0 }; // åˆå§‹åŒ–å…ƒç´ ä½ç½®
            setInterval(updateDateTime, 1000); // æ¯ç§’æ›´æ–°ä¸€æ¬¡
            updateDateTime(); // ç«‹å³æ›´æ–°ä¸€æ¬¡ä»¥é¿å…å»¶é²

            // è¨­å®šå½ˆå‡ºè¦–çª—çš„ã€Œå®Œæˆã€æŒ‰éˆ•äº‹ä»¶ï¼Œé»æ“Šå¾Œé—œé–‰å½ˆå‡ºè¦–çª—
            document.getElementById('doneBtn').onclick = function() {
                document.getElementById('settingsModal').style.display = 'none';
            };

            // è¨­å®šé¸é …çš„è®Šæ›´äº‹ä»¶
            // æ¯ç•¶ä»»ä½•é–‹é—œæˆ–é¡è‰²é¸æ“‡å™¨æ”¹è®Šæ™‚ï¼Œéƒ½æœƒæ›´æ–° displaySettingsï¼Œå„²å­˜è¨­å®šä¸¦æ›´æ–°é¡¯ç¤ºã€‚
            document.getElementById('showGregorianYear').onchange = function(event) {
                displaySettings.showGregorianYear = event.target.checked;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('showGregorianMonth').onchange = function(event) {
                displaySettings.showGregorianMonth = event.target.checked;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('showGregorianDay').onchange = function(event) {
                displaySettings.showGregorianDay = event.target.checked;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('showGregorianWeekday').onchange = function(event) {
                displaySettings.showGregorianWeekday = event.target.checked;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('showMinguoYear').onchange = function(event) {
                displaySettings.showMinguoYear = event.target.checked;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('showLunarMonth').onchange = function(event) {
                displaySettings.showLunarMonth = event.target.checked;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('showLunarDay').onchange = function(event) {
                displaySettings.showLunarDay = event.target.checked;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('showLunarShiChen').onchange = function(event) {
                displaySettings.showLunarShiChen = event.target.checked;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('showJieqi').onchange = function(event) {
                displaySettings.showJieqi = event.target.checked;
                saveSettings();
                updateDateTime();
            };

            document.getElementById('textColor').onchange = function(event) {
                displaySettings.textColor = event.target.value;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('backgroundColor').onchange = function(event) {
                displaySettings.backgroundColor = event.target.value;
                saveSettings();
                updateDateTime();
            };

            document.getElementById('gregorianYearColor').onchange = function(event) {
                displaySettings.gregorianYearColor = event.target.value;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('gregorianMonthColor').onchange = function(event) {
                displaySettings.gregorianMonthColor = event.target.value;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('gregorianDayColor').onchange = function(event) {
                displaySettings.gregorianDayColor = event.target.value;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('gregorianWeekdayColor').onchange = function(event) {
                displaySettings.gregorianWeekdayColor = event.target.value;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('minguoYearColor').onchange = function(event) {
                displaySettings.minguoYearColor = event.target.value;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('lunarMonthColor').onchange = function(event) {
                displaySettings.lunarMonthColor = event.target.value;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('lunarDayColor').onchange = function(event) {
                displaySettings.lunarDayColor = event.target.value;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('lunarShiChenColor').onchange = function(event) {
                displaySettings.lunarShiChenColor = event.target.value;
                saveSettings();
                updateDateTime();
            };
            document.getElementById('jieqiColor').onchange = function(event) {
                displaySettings.jieqiColor = event.target.value;
                saveSettings();
                updateDateTime();
            };

            // æ¢å¾©é è¨­æŒ‰éˆ•äº‹ä»¶
            document.getElementById('restoreDefaultsBtn').onclick = restoreDefaults;
            // æ–°å¢éš¨æ©Ÿé¡è‰²æŒ‰éˆ•äº‹ä»¶
            document.getElementById('randomColorsBtn').onclick = setRandomColors;
        };
    </script>
</body>
</html>
ï¿½
